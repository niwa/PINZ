<!DOCTYPE html>
<!-- saved from url=(0178)file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andy McKenzie (NIWA)">
<meta name="dcterms.date" content="2024-03-07">

<title>XGBoost and VCSN data for isoscapes</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./XGBoost_files/clipboard.min.js.download"></script>
<script src="./XGBoost_files/quarto.js.download"></script>
<script src="./XGBoost_files/popper.min.js.download"></script>
<script src="./XGBoost_files/tippy.umd.min.js.download"></script>
<script src="./XGBoost_files/anchor.min.js.download"></script>
<link href="./XGBoost_files/tippy.css" rel="stylesheet">
<link href="./XGBoost_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./XGBoost_files/bootstrap.min.js.download"></script>
<link href="./XGBoost_files/bootstrap-icons.css" rel="stylesheet">
<link href="./XGBoost_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="./XGBoost_files/tabwid.css" rel="stylesheet">
<script src="./XGBoost_files/tabwid.js.download"></script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#new-things" id="toc-new-things" class="nav-link active" data-scroll-target="#new-things"><span class="header-section-number">1</span> New things</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#precipitation-isotope-data" id="toc-precipitation-isotope-data" class="nav-link" data-scroll-target="#precipitation-isotope-data"><span class="header-section-number">2</span> Precipitation isotope data</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#raw-data-from-excel-spreadsheet" id="toc-raw-data-from-excel-spreadsheet" class="nav-link" data-scroll-target="#raw-data-from-excel-spreadsheet"><span class="header-section-number">2.1</span> Raw data from Excel spreadsheet</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"><span class="header-section-number">2.2</span> Missing values</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#drop-frew53-site" id="toc-drop-frew53-site" class="nav-link" data-scroll-target="#drop-frew53-site"><span class="header-section-number">2.3</span> Drop FREW53 site</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#temporal-span-by-site" id="toc-temporal-span-by-site" class="nav-link" data-scroll-target="#temporal-span-by-site"><span class="header-section-number">2.4</span> Temporal span by site</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plot-site-locations" id="toc-plot-site-locations" class="nav-link" data-scroll-target="#plot-site-locations"><span class="header-section-number">2.5</span> Plot site locations</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-number-of-observations" id="toc-spatial-distribution-of-number-of-observations" class="nav-link" data-scroll-target="#spatial-distribution-of-number-of-observations"><span class="header-section-number">2.6</span> Spatial distribution of number of observations</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plot-raw-data-time-series-by-site" id="toc-plot-raw-data-time-series-by-site" class="nav-link" data-scroll-target="#plot-raw-data-time-series-by-site"><span class="header-section-number">2.7</span> Plot raw data time series by site</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#appending-vcsn-daily-climate-data" id="toc-appending-vcsn-daily-climate-data" class="nav-link" data-scroll-target="#appending-vcsn-daily-climate-data"><span class="header-section-number">3</span> Appending VCSN daily climate data</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#site-and-nearest-vcsn-daily-climate-data" id="toc-site-and-nearest-vcsn-daily-climate-data" class="nav-link" data-scroll-target="#site-and-nearest-vcsn-daily-climate-data"><span class="header-section-number">3.1</span> Site and nearest VCSN daily climate data</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#isotope-data-appended-with-monthly-mean-vcsn-climate-data" id="toc-isotope-data-appended-with-monthly-mean-vcsn-climate-data" class="nav-link" data-scroll-target="#isotope-data-appended-with-monthly-mean-vcsn-climate-data"><span class="header-section-number">3.2</span> Isotope data appended with monthly mean VCSN climate data</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#closer-look-at-gnip-invercargill-site-temporal-changes" id="toc-closer-look-at-gnip-invercargill-site-temporal-changes" class="nav-link" data-scroll-target="#closer-look-at-gnip-invercargill-site-temporal-changes"><span class="header-section-number">3.3</span> Closer look at GNIP INVERCARGILL site temporal changes</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#isotope-data-for-2000-onward" id="toc-isotope-data-for-2000-onward" class="nav-link" data-scroll-target="#isotope-data-for-2000-onward"><span class="header-section-number">3.4</span> Isotope data for 2000 onward</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis"><span class="header-section-number">4</span> Exploratory data analysis</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#distribution-of-d180" id="toc-distribution-of-d180" class="nav-link" data-scroll-target="#distribution-of-d180"><span class="header-section-number">4.1</span> Distribution of d180</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#correlations" id="toc-correlations" class="nav-link" data-scroll-target="#correlations"><span class="header-section-number">4.2</span> Correlations</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#xgboost-model-all-data" id="toc-xgboost-model-all-data" class="nav-link" data-scroll-target="#xgboost-model-all-data"><span class="header-section-number">5</span> XGBoost model all data</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#initial-data-split" id="toc-initial-data-split" class="nav-link" data-scroll-target="#initial-data-split"><span class="header-section-number">5.1</span> Initial data split</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing"><span class="header-section-number">5.2</span> Preprocessing</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-xgboost-model" id="toc-setup-xgboost-model" class="nav-link" data-scroll-target="#setup-xgboost-model"><span class="header-section-number">5.3</span> Setup XGBoost model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-workflow" id="toc-setup-workflow" class="nav-link" data-scroll-target="#setup-workflow"><span class="header-section-number">5.4</span> Setup workflow</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#grid-specification" id="toc-grid-specification" class="nav-link" data-scroll-target="#grid-specification"><span class="header-section-number">5.5</span> Grid specification</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cross-validation-split" id="toc-cross-validation-split" class="nav-link" data-scroll-target="#cross-validation-split"><span class="header-section-number">5.6</span> Cross validation split</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#tune-the-model" id="toc-tune-the-model" class="nav-link" data-scroll-target="#tune-the-model"><span class="header-section-number">5.7</span> Tune the model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-model" id="toc-final-model" class="nav-link" data-scroll-target="#final-model"><span class="header-section-number">5.8</span> Final model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-fit" id="toc-final-fit" class="nav-link" data-scroll-target="#final-fit"><span class="header-section-number">5.9</span> Final fit</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#r-squared-values" id="toc-r-squared-values" class="nav-link" data-scroll-target="#r-squared-values"><span class="header-section-number">5.10</span> R-squared values</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#explaining-model-predictions" id="toc-explaining-model-predictions" class="nav-link" data-scroll-target="#explaining-model-predictions"><span class="header-section-number">5.11</span> Explaining model predictions</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#global-feature-importance" id="toc-global-feature-importance" class="nav-link" data-scroll-target="#global-feature-importance"><span class="header-section-number">5.11.1</span> Global feature importance</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#partial-dependence-profiles" id="toc-partial-dependence-profiles" class="nav-link" data-scroll-target="#partial-dependence-profiles"><span class="header-section-number">5.11.2</span> Partial dependence profiles</a></li>
  </ul></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#all-data-predictions" id="toc-all-data-predictions" class="nav-link" data-scroll-target="#all-data-predictions"><span class="header-section-number">6</span> All data predictions</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plots-of-observed-and-predicted-at-all-sites" id="toc-plots-of-observed-and-predicted-at-all-sites" class="nav-link" data-scroll-target="#plots-of-observed-and-predicted-at-all-sites"><span class="header-section-number">6.1</span> Plots of observed and predicted at all sites</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#observed-and-predicted-over-all-sites" id="toc-observed-and-predicted-over-all-sites" class="nav-link" data-scroll-target="#observed-and-predicted-over-all-sites"><span class="header-section-number">6.2</span> Observed and predicted over all sites</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-residuals" id="toc-spatial-distribution-of-residuals" class="nav-link" data-scroll-target="#spatial-distribution-of-residuals"><span class="header-section-number">6.3</span> Spatial distribution of residuals</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#xgboost-model-2000-onward" id="toc-xgboost-model-2000-onward" class="nav-link" data-scroll-target="#xgboost-model-2000-onward"><span class="header-section-number">7</span> XGBoost model 2000 onward</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#initial-data-split-1" id="toc-initial-data-split-1" class="nav-link" data-scroll-target="#initial-data-split-1"><span class="header-section-number">7.1</span> Initial data split</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#preprocessing-1" id="toc-preprocessing-1" class="nav-link" data-scroll-target="#preprocessing-1"><span class="header-section-number">7.2</span> Preprocessing</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-xgboost-model-1" id="toc-setup-xgboost-model-1" class="nav-link" data-scroll-target="#setup-xgboost-model-1"><span class="header-section-number">7.3</span> Setup XGBoost model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-workflow-1" id="toc-setup-workflow-1" class="nav-link" data-scroll-target="#setup-workflow-1"><span class="header-section-number">7.4</span> Setup workflow</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#grid-specification-1" id="toc-grid-specification-1" class="nav-link" data-scroll-target="#grid-specification-1"><span class="header-section-number">7.5</span> Grid specification</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cross-validation-split-1" id="toc-cross-validation-split-1" class="nav-link" data-scroll-target="#cross-validation-split-1"><span class="header-section-number">7.6</span> Cross validation split</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#tune-the-model-1" id="toc-tune-the-model-1" class="nav-link" data-scroll-target="#tune-the-model-1"><span class="header-section-number">7.7</span> Tune the model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-model-1" id="toc-final-model-1" class="nav-link" data-scroll-target="#final-model-1"><span class="header-section-number">7.8</span> Final model</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-fit-1" id="toc-final-fit-1" class="nav-link" data-scroll-target="#final-fit-1"><span class="header-section-number">7.9</span> Final fit</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#r-squared-values-1" id="toc-r-squared-values-1" class="nav-link" data-scroll-target="#r-squared-values-1"><span class="header-section-number">7.10</span> R-squared values</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#explaining-model-predictions-1" id="toc-explaining-model-predictions-1" class="nav-link" data-scroll-target="#explaining-model-predictions-1"><span class="header-section-number">7.11</span> Explaining model predictions</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#global-feature-importance-1" id="toc-global-feature-importance-1" class="nav-link" data-scroll-target="#global-feature-importance-1"><span class="header-section-number">7.11.1</span> Global feature importance</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#partial-dependence-profiles-1" id="toc-partial-dependence-profiles-1" class="nav-link" data-scroll-target="#partial-dependence-profiles-1"><span class="header-section-number">7.11.2</span> Partial dependence profiles</a></li>
  </ul></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#all-data-predictions-1" id="toc-all-data-predictions-1" class="nav-link" data-scroll-target="#all-data-predictions-1"><span class="header-section-number">8</span> All data predictions</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plots-of-observed-and-predicted-at-all-sites-1" id="toc-plots-of-observed-and-predicted-at-all-sites-1" class="nav-link" data-scroll-target="#plots-of-observed-and-predicted-at-all-sites-1"><span class="header-section-number">8.1</span> Plots of observed and predicted at all sites</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#observed-and-predicted-over-all-sites-1" id="toc-observed-and-predicted-over-all-sites-1" class="nav-link" data-scroll-target="#observed-and-predicted-over-all-sites-1"><span class="header-section-number">8.2</span> Observed and predicted over all sites</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-residuals-1" id="toc-spatial-distribution-of-residuals-1" class="nav-link" data-scroll-target="#spatial-distribution-of-residuals-1"><span class="header-section-number">8.3</span> Spatial distribution of residuals</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#compare-two-models" id="toc-compare-two-models" class="nav-link" data-scroll-target="#compare-two-models"><span class="header-section-number">9</span> Compare two models</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#rmse-by-site" id="toc-rmse-by-site" class="nav-link" data-scroll-target="#rmse-by-site"><span class="header-section-number">9.1</span> RMSE by site</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#sites-with-worse-fit" id="toc-sites-with-worse-fit" class="nav-link" data-scroll-target="#sites-with-worse-fit"><span class="header-section-number">9.2</span> Sites with worse fit</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#predicting-over-nz" id="toc-predicting-over-nz" class="nav-link" data-scroll-target="#predicting-over-nz"><span class="header-section-number">10</span> Predicting over NZ</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#base-nz-map" id="toc-base-nz-map" class="nav-link" data-scroll-target="#base-nz-map"><span class="header-section-number">10.1</span> Base NZ map</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#elevation-data-at-vcsn-points" id="toc-elevation-data-at-vcsn-points" class="nav-link" data-scroll-target="#elevation-data-at-vcsn-points"><span class="header-section-number">10.2</span> Elevation data at VCSN points</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#vcsn-climate-data-for-2023" id="toc-vcsn-climate-data-for-2023" class="nav-link" data-scroll-target="#vcsn-climate-data-for-2023"><span class="header-section-number">10.3</span> VCSN climate data for 2023</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#prediction-and-plotting" id="toc-prediction-and-plotting" class="nav-link" data-scroll-target="#prediction-and-plotting"><span class="header-section-number">10.4</span> Prediction and plotting</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#only-january" id="toc-only-january" class="nav-link" data-scroll-target="#only-january"><span class="header-section-number">10.4.1</span> Only January</a></li>
  <li><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#all-months" id="toc-all-months" class="nav-link" data-scroll-target="#all-months"><span class="header-section-number">10.4.2</span> All Months</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">XGBoost and VCSN data for isoscapes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andy McKenzie (NIWA) </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 7, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/setup_be128e6c3546f7d226a15887c20edf21">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># warning is false in the YAML header, but doesn't seem to work</span></span>
<span id="cb1-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb1-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">warning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cn">FALSE</span></span>
<span id="cb1-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)   <span class="co"># need by vcsn functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.11.2, GDAL 3.7.2, PROJ 9.3.0; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb3-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb3-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb3-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally) <span class="co"># for ggpairs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'GGally':
  method from   
  +.gg   ggplot2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: abind</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(elevatr)  <span class="co"># for point elevation data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>elevatr v0.99.0 NOTE: Version 0.99.0 of 'elevatr' uses 'sf' and 'terra'.  Use 
of the 'sp', 'raster', and underlying 'rgdal' packages by 'elevatr' is being 
deprecated; however, get_elev_raster continues to return a RasterLayer.  This 
will be dropped in future versions, so please plan accordingly.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb13-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rnaturalearthdata'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:rnaturalearth':

    countries110</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github("ropensci/rnaturalearthhires")</span></span>
<span id="cb16-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthhires)</span>
<span id="cb16-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tree)</span>
<span id="cb16-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb16-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set_flextable_defaults</span>(<span class="at">big.mark =</span> <span class="st">""</span>)</span>
<span id="cb16-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-9" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="cf">function</span>(input.data, <span class="at">caption =</span> <span class="st">""</span>, <span class="at">num.rows =</span> <span class="cn">Inf</span>) {</span>
<span id="cb16-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-10" aria-hidden="true" tabindex="-1"></a> ft <span class="ot">&lt;-</span> input.data <span class="sc">|&gt;</span></span>
<span id="cb16-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">slice_head</span>(<span class="at">n =</span> num.rows) <span class="sc">|&gt;</span></span>
<span id="cb16-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">autofit</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_zebra</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">set_caption</span>(caption)</span>
<span id="cb16-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-16" aria-hidden="true" tabindex="-1"></a> ft</span>
<span id="cb16-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-18"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.1.1 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.5     ✔ rsample      1.2.0
✔ dials        1.2.0     ✔ tibble       3.2.1
✔ dplyr        1.1.4     ✔ tidyr        1.3.0
✔ infer        1.0.5     ✔ tune         1.1.2
✔ modeldata    1.2.0     ✔ workflows    1.1.3
✔ parsnip      1.1.1     ✔ workflowsets 1.0.1
✔ purrr        1.0.2     ✔ yardstick    1.2.0
✔ recipes      1.0.9     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::compose()  masks flextable::compose()
✖ purrr::discard()  masks scales::discard()
✖ dplyr::filter()   masks stats::filter()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Learn how to get started at https://www.tidymodels.org/start/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to handle conflicts of tidymodels with other packages</span></span>
<span id="cb20-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidymodels_prefer</span>()</span>
<span id="cb20-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># model agnostic explainers for tidymodels</span></span>
<span id="cb20-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DALEXtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: DALEX</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Welcome to DALEX (version: 2.4.3).
Find examples and detailed introduction at: http://ema.drwhy.ai/
Additional features will be available after installation of: ggpubr.
Use 'install_dependencies()' to get all suggested dependencies</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'DALEX'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    explain</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../../auxiliary.code.R"</span>)</span>
<span id="cb25-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../../vcsn.functions.R"</span>)</span>
<span id="cb25-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># speed up computation with parallel processing (esp during tuning)</span></span>
<span id="cb25-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: foreach</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'foreach'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:purrr':

    accumulate, when</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: iterators</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: parallel</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-1" aria-hidden="true" tabindex="-1"></a>all_cores <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>(<span class="at">logical =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoParallel</span>(<span class="at">cores =</span> all_cores)</span>
<span id="cb31-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># output directory</span></span>
<span id="cb31-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"output"</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"output"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="new-things" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> New things</h1>
</section>
<section id="precipitation-isotope-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Precipitation isotope data</h1>
<section id="raw-data-from-excel-spreadsheet" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="raw-data-from-excel-spreadsheet"><span class="header-section-number">2.1</span> Raw data from Excel spreadsheet<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#raw-data-from-excel-spreadsheet" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>One sheet from the Master Excel sheet contains the monthly data by site. Another sheet contains site information: lat, long, and elevation.</p>
<p><a href="https://niwa-my.sharepoint.com/personal/bruce_dudley_niwa_co_nz/_layouts/15/onedrive.aspx?csf=1&amp;web=1&amp;e=hB4BFU&amp;cid=ad371b58%2D892c%2D40db%2D974e%2D7dea4f7d9893&amp;id=%2Fpersonal%2Fbruce%5Fdudley%5Fniwa%5Fco%5Fnz%2FDocuments%2FPrecip%20isotope%20data%20master%20files&amp;FolderCTID=0x012000B57007D9F243404E9236FE044971C271&amp;view=0">Master Excel Spreadsheet</a></p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-1_931baedeca3c60d879524fb02e59ff69">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The d180 data </span></span>
<span id="cb32-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-5" aria-hidden="true" tabindex="-1"></a>data.Excel.orig <span class="ot">&lt;-</span> <span class="fu">iso_master_extract_data</span>(</span>
<span id="cb32-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">path.file.location =</span> <span class="st">"data/precip.iso.database.nz.26th.Feb.2024.xlsx"</span>,</span>
<span id="cb32-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">data.type =</span> <span class="st">"Monthly"</span>,</span>
<span id="cb32-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span></span>
<span id="cb32-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a date column</span></span>
<span id="cb32-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-12" aria-hidden="true" tabindex="-1"></a>ddata <span class="ot">&lt;-</span> data.Excel.orig <span class="sc">|&gt;</span></span>
<span id="cb32-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Group, Project, Site, SampleID, year, month, day, <span class="at">d18O =</span> O18) <span class="sc">|&gt;</span></span>
<span id="cb32-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> lubridate<span class="sc">::</span><span class="fu">make_date</span>(year, month, <span class="at">day =</span> day)) <span class="sc">|&gt;</span></span>
<span id="cb32-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>day)</span>
<span id="cb32-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-18"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Site information </span></span>
<span id="cb32-19"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-20"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-21" aria-hidden="true" tabindex="-1"></a>data.Excel.site.info.orig <span class="ot">&lt;-</span> <span class="fu">iso_master_extract_data</span>(</span>
<span id="cb32-22"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">path.file.location =</span> <span class="st">"data/precip.iso.database.nz.26th.Feb.2024.xlsx"</span>,</span>
<span id="cb32-23"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">data.type =</span> <span class="st">"SITE DATA lookup"</span></span>
<span id="cb32-24"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-25"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-26"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a date column</span></span>
<span id="cb32-27"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-27" aria-hidden="true" tabindex="-1"></a>site.info <span class="ot">&lt;-</span> data.Excel.site.info.orig <span class="sc">|&gt;</span></span>
<span id="cb32-28"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, area, <span class="at">lat =</span> lat, <span class="at">lon =</span> long, <span class="at">height =</span> ELEVATION)</span>
<span id="cb32-29"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-30"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(ddata, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 8
  Group                 Project      Site  SampleID  year month  d18O Date      
  &lt;chr&gt;                 &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    
1 Environment Southland 2015-2016 M… Balf… 20150617  2015     1 -6.09 2015-01-04
2 Environment Southland 2015-2016 M… Balf… 20150581  2015     2 -8.03 2015-02-04
3 Environment Southland 2015-2016 M… Balf… 20150945  2015     3 -5.39 2015-03-02</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(site.info, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  Site   area                 lat   lon height
  &lt;chr&gt;  &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1 FREW 1 Far North District -35.1  173.   35.0
2 FREW 2 Kaipara District   -36.0  174.   31.4
3 FREW 3 Whangarei District -35.6  174.   71.4</code></pre>
</div>
</div>
<p>The number of observations by (group, project, site) and time period over which they cover. Note that the Invercargill site has data collected under two slightly different project names.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-2_139e7f49525b590287092354de6db947">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-1" aria-hidden="true" tabindex="-1"></a>table.amount.data <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Group, Project, Site) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb36-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinDate =</span> <span class="fu">min</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb36-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxDate =</span> <span class="fu">max</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Group', 'Project'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb38-1" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(table.amount.data, <span class="at">path =</span> <span class="st">"output/table.amount.data.xlsx"</span>)</span>
<span id="cb38-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb38-3" aria-hidden="true" tabindex="-1"></a>total.number.samples <span class="ot">&lt;-</span> <span class="fu">nrow</span>(ddata)</span>
<span id="cb38-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb38-4" aria-hidden="true" tabindex="-1"></a>total.number.sites <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(ddata<span class="sc">$</span>Site))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The total number of samples is 2746 from 98 unique sites.</p>
<p>Number of observations by site: sorted by site name, and number of observations.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-3_0611088a0c17bb3c581acb92075e329f">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort by site name</span></span>
<span id="cb39-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-2" aria-hidden="true" tabindex="-1"></a>table.amount.data.site <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site) <span class="sc">|&gt;</span></span>
<span id="cb39-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb39-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinDate =</span> <span class="fu">min</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb39-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxDate =</span> <span class="fu">max</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-7" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb39-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-9" aria-hidden="true" tabindex="-1"></a>table.amount.data.site <span class="sc">|&gt;</span></span>
<span id="cb39-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Site) <span class="sc">|&gt;</span></span>
<span id="cb39-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ft</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="flextable-shadow-host"><template shadowrootmode="open"><div class="tabwid"><style>.cl-e13a363e{}.cl-e11d7030{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e11d7076{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e1291192{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e12911a6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e129420c{width:2.901in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294220{width:0.54in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294221{width:1.067in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129422a{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294234{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129423e{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129423f{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294248{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294252{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294253{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129425c{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294266{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294270{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129427a{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294284{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294285{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129428e{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294298{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294299{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942a2{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942a3{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942b6{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942b7{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942c0{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942ca{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942d4{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942d5{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942de{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942e8{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942e9{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942ea{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942f2{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e12942fc{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294306{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294307{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294310{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294311{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129431a{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294324{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294325{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129432e{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294338{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294339{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129433a{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294342{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129434c{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e129434d{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1294356{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-e13a363e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-e129420c"><p class="cl-e1291192"><span class="cl-e11d7030">Site</span></p></th><th class="cl-e1294220"><p class="cl-e12911a6"><span class="cl-e11d7030">n</span></p></th><th class="cl-e1294221"><p class="cl-e12911a6"><span class="cl-e11d7030">MinDate</span></p></th><th class="cl-e1294221"><p class="cl-e12911a6"><span class="cl-e11d7030">MaxDate</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e129422a"><p class="cl-e1291192"><span class="cl-e11d7076">Ahuriri Valley</span></p></td><td class="cl-e1294234"><p class="cl-e12911a6"><span class="cl-e11d7076">23</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-11-11</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Arthurs Pass</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-08-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129422a"><p class="cl-e1291192"><span class="cl-e11d7076">Ashley Dene</span></p></td><td class="cl-e1294234"><p class="cl-e12911a6"><span class="cl-e11d7076">22</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2017-10-15</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2019-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294253"><p class="cl-e1291192"><span class="cl-e11d7076">Ashley Forest</span></p></td><td class="cl-e129425c"><p class="cl-e12911a6"><span class="cl-e11d7076">23</span></p></td><td class="cl-e1294266"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-09-22</span></p></td><td class="cl-e1294266"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294270"><p class="cl-e1291192"><span class="cl-e11d7076">Balfour at Glenure St Patricks Road</span></p></td><td class="cl-e129427a"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294285"><p class="cl-e1291192"><span class="cl-e11d7076">Cardrona Base area</span></p></td><td class="cl-e129428e"><p class="cl-e12911a6"><span class="cl-e11d7076">5</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-06-15</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294299"><p class="cl-e1291192"><span class="cl-e11d7076">Central Plains Aquifer at Heddon Bush</span></p></td><td class="cl-e12942a2"><p class="cl-e12911a6"><span class="cl-e11d7076">16</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-03-04</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294285"><p class="cl-e1291192"><span class="cl-e11d7076">Christchurch</span></p></td><td class="cl-e129428e"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-07-15</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294270"><p class="cl-e1291192"><span class="cl-e11d7076">Edendale at Coal Pit Road</span></p></td><td class="cl-e129427a"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 1</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">19</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 10</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">26</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 11</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 13</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 14</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 15</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 16</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 17</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">26</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-09-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 18</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 19</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 2</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 20</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 21</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 22</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 23</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 24</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 25</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">33</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 26</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 27</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 28</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">26</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 29</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 3</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">34</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 30</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 31</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">35</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 32</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 33</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 34</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 35</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 37</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 38</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">35</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 39</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 4</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 40</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">4</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 41</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 42</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 43</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 44</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 45</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">5</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 46</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 47</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">33</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 48</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 49</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">35</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 5</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 50</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-08-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 51</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 52</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">19</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-01-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 53</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-01-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 54</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">22</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-01-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 56</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">28</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-01-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 57</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-01-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 58</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">20</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2008-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 6</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 7</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">30</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 8</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">6</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">FREW 9</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">6</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-07-15</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2007-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ea"><p class="cl-e1291192"><span class="cl-e11d7076">Fairlight at Cainard Station</span></p></td><td class="cl-e12942f2"><p class="cl-e12911a6"><span class="cl-e11d7076">15</span></p></td><td class="cl-e12942fc"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e12942fc"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294285"><p class="cl-e1291192"><span class="cl-e11d7076">GNIP INVERCARGILL</span></p></td><td class="cl-e129428e"><p class="cl-e12911a6"><span class="cl-e11d7076">282</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">1977-04-15</span></p></td><td class="cl-e1294298"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294270"><p class="cl-e1291192"><span class="cl-e11d7076">GNIP KAITAIA</span></p></td><td class="cl-e129427a"><p class="cl-e12911a6"><span class="cl-e11d7076">241</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">1962-10-15</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">1991-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294306"><p class="cl-e1291192"><span class="cl-e11d7076">Greymouth</span></p></td><td class="cl-e1294307"><p class="cl-e12911a6"><span class="cl-e11d7076">29</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-07-15</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">Hamilton Burn at Mt Hamilton Road</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">14</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-04-08</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Inchbonnie</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">26</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-10-15</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">Lake Moeraki</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-10-18</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294311"><p class="cl-e1291192"><span class="cl-e11d7076">Lower Aparima Aquifer at Riverton</span></p></td><td class="cl-e129431a"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294324"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294324"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294299"><p class="cl-e1291192"><span class="cl-e11d7076">Makarewa Aquifer at Mckinnon Road</span></p></td><td class="cl-e12942a2"><p class="cl-e12911a6"><span class="cl-e11d7076">16</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Makarora</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-11-01</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-12-01</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">Mawhera Forest</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-09-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294306"><p class="cl-e1291192"><span class="cl-e11d7076">McKellars Flat at Gorge Burn</span></p></td><td class="cl-e1294307"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">Melrose Farm</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">20</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2014-08-15</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Mokoreta at Mt Alexander</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">16</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294325"><p class="cl-e1291192"><span class="cl-e11d7076">Mt Hutt Admin carpark</span></p></td><td class="cl-e129432e"><p class="cl-e12911a6"><span class="cl-e11d7076">4</span></p></td><td class="cl-e1294338"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-06-15</span></p></td><td class="cl-e1294338"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">NZWaM 1</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2018-05-03</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2020-03-06</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">NZWaM 2</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">25</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2018-05-03</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2020-03-06</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">NZWaM 3</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">10</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2017-12-28</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">NZWaM 4</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">11</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2017-12-28</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942ca"><p class="cl-e1291192"><span class="cl-e11d7076">NZWaM 5</span></p></td><td class="cl-e12942d4"><p class="cl-e12911a6"><span class="cl-e11d7076">11</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2017-12-28</span></p></td><td class="cl-e12942d5"><p class="cl-e12911a6"><span class="cl-e11d7076">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294339"><p class="cl-e1291192"><span class="cl-e11d7076">Ohau top weather plot</span></p></td><td class="cl-e129433a"><p class="cl-e12911a6"><span class="cl-e11d7076">7</span></p></td><td class="cl-e1294342"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-07-15</span></p></td><td class="cl-e1294342"><p class="cl-e12911a6"><span class="cl-e11d7076">2022-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294306"><p class="cl-e1291192"><span class="cl-e11d7076">Remarkables Sugar Weather plot</span></p></td><td class="cl-e1294307"><p class="cl-e12911a6"><span class="cl-e11d7076">4</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-06-15</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-09-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294299"><p class="cl-e1291192"><span class="cl-e11d7076">Riversdale Aquifer at Liverpool Street</span></p></td><td class="cl-e12942a2"><p class="cl-e12911a6"><span class="cl-e11d7076">16</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-02-04</span></p></td><td class="cl-e12942a3"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294253"><p class="cl-e1291192"><span class="cl-e11d7076">Roaring Billy</span></p></td><td class="cl-e129425c"><p class="cl-e12911a6"><span class="cl-e11d7076">24</span></p></td><td class="cl-e1294266"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-10-19</span></p></td><td class="cl-e1294266"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294270"><p class="cl-e1291192"><span class="cl-e11d7076">Sheffield</span></p></td><td class="cl-e129427a"><p class="cl-e12911a6"><span class="cl-e11d7076">27</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-08-15</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Twizel</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">24</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-11-11</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294270"><p class="cl-e1291192"><span class="cl-e11d7076">Waiau River at Clifden</span></p></td><td class="cl-e129427a"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294284"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129434c"><p class="cl-e1291192"><span class="cl-e11d7076">Waihopai River at Waihopai Dam</span></p></td><td class="cl-e129434d"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294356"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294356"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942b6"><p class="cl-e1291192"><span class="cl-e11d7076">Waikaia River at Piano Flat</span></p></td><td class="cl-e12942b7"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e12942c0"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Waimate</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">24</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-11-11</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e12942de"><p class="cl-e1291192"><span class="cl-e11d7076">Waitaki Dam</span></p></td><td class="cl-e12942e8"><p class="cl-e12911a6"><span class="cl-e11d7076">23</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2021-11-11</span></p></td><td class="cl-e12942e9"><p class="cl-e12911a6"><span class="cl-e11d7076">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129423f"><p class="cl-e1291192"><span class="cl-e11d7076">Waituna at Lawson Road</span></p></td><td class="cl-e1294248"><p class="cl-e12911a6"><span class="cl-e11d7076">17</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294252"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e129422a"><p class="cl-e1291192"><span class="cl-e11d7076">Wendon Valley at Waikaka</span></p></td><td class="cl-e1294234"><p class="cl-e12911a6"><span class="cl-e11d7076">15</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-03-02</span></p></td><td class="cl-e129423e"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1294306"><p class="cl-e1291192"><span class="cl-e11d7076">Whitestone Aquifer at Lynwood</span></p></td><td class="cl-e1294307"><p class="cl-e12911a6"><span class="cl-e11d7076">16</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2015-01-04</span></p></td><td class="cl-e1294310"><p class="cl-e12911a6"><span class="cl-e11d7076">2016-05-03</span></p></td></tr></tbody></table></div><link href="./XGBoost_files/tabwid.css" rel="stylesheet"></template></div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort by number of observations (low to high)</span></span>
<span id="cb40-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb40-2" aria-hidden="true" tabindex="-1"></a>table.amount.data.site <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ft</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="flextable-shadow-host"><template shadowrootmode="open"><div class="tabwid"><style>.cl-e1db5b9a{}.cl-e1ae58e8{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e1ae5910{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e1c59116{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e1c59134{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e1c620d6{width:2.901in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62108{width:0.54in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6211c{width:1.067in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62130{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6213a{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6214e{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62158{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62162{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6216c{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62176{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6218a{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62194{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6219e{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621b2{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621bc{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621c6{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621d0{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621e4{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c621f8{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62202{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6220c{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62216{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6222a{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6223e{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62248{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62252{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6225c{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62266{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62270{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6227a{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62284{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62298{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622ac{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622c0{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622ca{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622de{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622f2{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c622fc{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62310{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6231a{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6232e{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62338{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62339{width:2.901in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6234c{width:0.54in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62360{width:1.067in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6236a{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c62374{width:0.54in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1c6237e{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-e1db5b9a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-e1c620d6"><p class="cl-e1c59116"><span class="cl-e1ae58e8">Site</span></p></th><th class="cl-e1c62108"><p class="cl-e1c59134"><span class="cl-e1ae58e8">n</span></p></th><th class="cl-e1c6211c"><p class="cl-e1c59134"><span class="cl-e1ae58e8">MinDate</span></p></th><th class="cl-e1c6211c"><p class="cl-e1c59134"><span class="cl-e1ae58e8">MaxDate</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 40</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">4</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62158"><p class="cl-e1c59116"><span class="cl-e1ae5910">Mt Hutt Admin carpark</span></p></td><td class="cl-e1c62162"><p class="cl-e1c59134"><span class="cl-e1ae5910">4</span></p></td><td class="cl-e1c6216c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-06-15</span></p></td><td class="cl-e1c6216c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62176"><p class="cl-e1c59116"><span class="cl-e1ae5910">Remarkables Sugar Weather plot</span></p></td><td class="cl-e1c6218a"><p class="cl-e1c59134"><span class="cl-e1ae5910">4</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-06-15</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-09-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">Cardrona Base area</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">5</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-06-15</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 45</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">5</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 8</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">6</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 9</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">6</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621f8"><p class="cl-e1c59116"><span class="cl-e1ae5910">Ohau top weather plot</span></p></td><td class="cl-e1c62202"><p class="cl-e1c59134"><span class="cl-e1ae5910">7</span></p></td><td class="cl-e1c6220c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-07-15</span></p></td><td class="cl-e1c6220c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2022-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">NZWaM 3</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">10</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2017-12-28</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">NZWaM 4</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">11</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2017-12-28</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">NZWaM 5</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">11</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2017-12-28</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2019-12-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Hamilton Burn at Mt Hamilton Road</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">14</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-04-08</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62176"><p class="cl-e1c59116"><span class="cl-e1ae5910">Fairlight at Cainard Station</span></p></td><td class="cl-e1c6218a"><p class="cl-e1c59134"><span class="cl-e1ae5910">15</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62266"><p class="cl-e1c59116"><span class="cl-e1ae5910">Wendon Valley at Waikaka</span></p></td><td class="cl-e1c62270"><p class="cl-e1c59134"><span class="cl-e1ae5910">15</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-03-02</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62284"><p class="cl-e1c59116"><span class="cl-e1ae5910">Central Plains Aquifer at Heddon Bush</span></p></td><td class="cl-e1c62298"><p class="cl-e1c59134"><span class="cl-e1ae5910">16</span></p></td><td class="cl-e1c622ac"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-03-04</span></p></td><td class="cl-e1c622ac"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c622c0"><p class="cl-e1c59116"><span class="cl-e1ae5910">Makarewa Aquifer at Mckinnon Road</span></p></td><td class="cl-e1c622ca"><p class="cl-e1c59134"><span class="cl-e1ae5910">16</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">Mokoreta at Mt Alexander</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">16</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c622c0"><p class="cl-e1c59116"><span class="cl-e1ae5910">Riversdale Aquifer at Liverpool Street</span></p></td><td class="cl-e1c622ca"><p class="cl-e1c59134"><span class="cl-e1ae5910">16</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-02-04</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62176"><p class="cl-e1c59116"><span class="cl-e1ae5910">Whitestone Aquifer at Lynwood</span></p></td><td class="cl-e1c6218a"><p class="cl-e1c59134"><span class="cl-e1ae5910">16</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">Balfour at Glenure St Patricks Road</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c622f2"><p class="cl-e1c59116"><span class="cl-e1ae5910">Edendale at Coal Pit Road</span></p></td><td class="cl-e1c622fc"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c62310"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c62310"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c622c0"><p class="cl-e1c59116"><span class="cl-e1ae5910">Lower Aparima Aquifer at Riverton</span></p></td><td class="cl-e1c622ca"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c622de"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62176"><p class="cl-e1c59116"><span class="cl-e1ae5910">McKellars Flat at Gorge Burn</span></p></td><td class="cl-e1c6218a"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c62194"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waiau River at Clifden</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6231a"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waihopai River at Waihopai Dam</span></p></td><td class="cl-e1c6232e"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c62338"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c62338"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waikaia River at Piano Flat</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-04</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waituna at Lawson Road</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">17</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-01-04</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-05-03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 1</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">19</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 52</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">19</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-01-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 58</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">20</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">Melrose Farm</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">20</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2014-08-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2016-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62266"><p class="cl-e1c59116"><span class="cl-e1ae5910">Ashley Dene</span></p></td><td class="cl-e1c62270"><p class="cl-e1c59134"><span class="cl-e1ae5910">22</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2017-10-15</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2019-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 54</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">22</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-01-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62266"><p class="cl-e1c59116"><span class="cl-e1ae5910">Ahuriri Valley</span></p></td><td class="cl-e1c62270"><p class="cl-e1c59134"><span class="cl-e1ae5910">23</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-11-11</span></p></td><td class="cl-e1c6227a"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62339"><p class="cl-e1c59116"><span class="cl-e1ae5910">Ashley Forest</span></p></td><td class="cl-e1c6234c"><p class="cl-e1c59134"><span class="cl-e1ae5910">23</span></p></td><td class="cl-e1c62360"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-09-22</span></p></td><td class="cl-e1c62360"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waitaki Dam</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">23</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-11-11</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62339"><p class="cl-e1c59116"><span class="cl-e1ae5910">Roaring Billy</span></p></td><td class="cl-e1c6234c"><p class="cl-e1c59134"><span class="cl-e1ae5910">24</span></p></td><td class="cl-e1c62360"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-10-19</span></p></td><td class="cl-e1c62360"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Twizel</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">24</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-11-11</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">Waimate</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">24</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-11-11</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Arthurs Pass</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-08-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 16</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 5</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-07-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 53</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-01-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-03-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Lake Moeraki</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-10-18</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">NZWaM 1</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2018-05-03</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2020-03-06</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">NZWaM 2</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">25</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2018-05-03</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2020-03-06</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 10</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">26</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 17</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">26</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-09-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 28</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">26</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Inchbonnie</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">26</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-10-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 14</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 18</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 30</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 37</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 4</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 42</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 57</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-01-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">Makarora</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-11-01</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-12-01</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">Mawhera Forest</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-09-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">Sheffield</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">27</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-08-15</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 13</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 22</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 27</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 32</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 33</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 35</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 56</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">28</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2008-01-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">Christchurch</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-07-15</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 11</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 19</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 2</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 20</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 24</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 29</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 34</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 41</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 43</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c621c6"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 46</span></p></td><td class="cl-e1c621d0"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c621e4"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-10-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62130"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 50</span></p></td><td class="cl-e1c6213a"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-08-15</span></p></td><td class="cl-e1c6214e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6236a"><p class="cl-e1c59116"><span class="cl-e1ae5910">Greymouth</span></p></td><td class="cl-e1c62374"><p class="cl-e1c59134"><span class="cl-e1ae5910">29</span></p></td><td class="cl-e1c6237e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2021-07-15</span></p></td><td class="cl-e1c6237e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2023-11-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 15</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 21</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 23</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 26</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 39</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-01-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 44</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 48</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 51</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 6</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 7</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">30</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2009-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 25</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">33</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-04-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 47</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">33</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 3</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">34</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 31</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">35</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62216"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 38</span></p></td><td class="cl-e1c6222a"><p class="cl-e1c59134"><span class="cl-e1ae5910">35</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6223e"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c62248"><p class="cl-e1c59116"><span class="cl-e1ae5910">FREW 49</span></p></td><td class="cl-e1c62252"><p class="cl-e1c59134"><span class="cl-e1ae5910">35</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2007-07-15</span></p></td><td class="cl-e1c6225c"><p class="cl-e1c59134"><span class="cl-e1ae5910">2010-05-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c622f2"><p class="cl-e1c59116"><span class="cl-e1ae5910">GNIP KAITAIA</span></p></td><td class="cl-e1c622fc"><p class="cl-e1c59134"><span class="cl-e1ae5910">241</span></p></td><td class="cl-e1c62310"><p class="cl-e1c59134"><span class="cl-e1ae5910">1962-10-15</span></p></td><td class="cl-e1c62310"><p class="cl-e1c59134"><span class="cl-e1ae5910">1991-12-15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1c6219e"><p class="cl-e1c59116"><span class="cl-e1ae5910">GNIP INVERCARGILL</span></p></td><td class="cl-e1c621b2"><p class="cl-e1c59134"><span class="cl-e1ae5910">282</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">1977-04-15</span></p></td><td class="cl-e1c621bc"><p class="cl-e1c59134"><span class="cl-e1ae5910">2015-05-15</span></p></td></tr></tbody></table></div><link href="./XGBoost_files/tabwid.css" rel="stylesheet"></template></div>
</div>
</div>
</section>
<section id="missing-values" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">2.2</span> Missing values<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#missing-values" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-4_4b46f93ebfaeeac70619385edbecad77">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-1" aria-hidden="true" tabindex="-1"></a>data.missing.O18 <span class="ot">&lt;-</span> data.Excel.orig <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rownumber =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data.Excel.orig), <span class="at">.before =</span> Group) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(O18))</span>
<span id="cb41-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-4" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(data.missing.O18, <span class="at">path =</span> <span class="st">"output/data.missing.O18.xlsx"</span>)</span>
<span id="cb41-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-6" aria-hidden="true" tabindex="-1"></a>data.missing.day <span class="ot">&lt;-</span> data.Excel.orig <span class="sc">|&gt;</span></span>
<span id="cb41-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rownumber =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data.Excel.orig), <span class="at">.before =</span> Group) <span class="sc">|&gt;</span>  </span>
<span id="cb41-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(day))</span>
<span id="cb41-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb41-9" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(data.missing.day, <span class="at">path =</span> <span class="st">"output/data.missing.day.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are 8 missing d18O values, for which many are highlighted as red rows in the master Excel spreadsheet. These are dropped in the next bit of code.</p>
<p>There are 0 records with missing day values.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-5_d7c83f9fe02342e495cd5a8da3375c17">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb42-1" aria-hidden="true" tabindex="-1"></a>ddata <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(d18O))</span>
<span id="cb42-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb42-4" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(ddata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">ddata</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">2738</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Group</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Project</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Site</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">SampleID</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2387</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">1962-10-15</td>
<td style="text-align: left;">2023-12-01</td>
<td style="text-align: left;">2009-02-15</td>
<td style="text-align: right;">662</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2007.51</td>
<td style="text-align: right;">11.92</td>
<td style="text-align: right;">1962.00</td>
<td style="text-align: right;">2007.00</td>
<td style="text-align: right;">2009.00</td>
<td style="text-align: right;">2015.00</td>
<td style="text-align: right;">2023.0</td>
<td style="text-align: left;">▁▁▁▇▅</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.67</td>
<td style="text-align: right;">3.42</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">12.0</td>
<td style="text-align: left;">▇▅▅▆▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">d18O</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-6.36</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">-24.14</td>
<td style="text-align: right;">-7.79</td>
<td style="text-align: right;">-6.17</td>
<td style="text-align: right;">-4.64</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: left;">▁▁▁▇▂</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="drop-frew53-site" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="drop-frew53-site"><span class="header-section-number">2.3</span> Drop FREW53 site<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#drop-frew53-site" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>During kriging for the sinusoidal model, there were lots of warning as the sites “FREW53” and “Arthurs Pass” had the same closed VCSN point, leading to a singular covariance matrix. The quick solution to this was remove the FREW53 site.</p>
<p>It is noted that, the hyperparmeter tuning ran into problems:</p>
<pre><code>→ A | warning: A correlation computation is required, but `estimate` is constant and has 0 standard deviation, resulting in a divide by 0 error. `NA` will be returned.</code></pre>
<pre><code>There were issues with some computations   A: x1 There were issues with some computations   A: x1</code></pre>
<pre><code>Warning: More than one set of outcomes were used when tuning. This should never happen. Review how the outcome is specified in your model.</code></pre>
<p>This may be related to the same site problem and correlations, so the FREW53 site is removed.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-6_4c2c80fddc0444b011e98a2c32595580">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb46-1" aria-hidden="true" tabindex="-1"></a>ddata <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Site <span class="sc">!=</span> <span class="st">"FREW 53"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Height is present for all sites.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-7_6eb75df552f15b322316a963c76c9e23">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb47-1" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(site.info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">site.info</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">199</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Site</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">63</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">197</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">area</td>
<td style="text-align: right;">88</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-43.22</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">-46.88</td>
<td style="text-align: right;">-45.04</td>
<td style="text-align: right;">-43.94</td>
<td style="text-align: right;">-42.73</td>
<td style="text-align: right;">-34.58</td>
<td style="text-align: left;">▇▆▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">lon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">170.86</td>
<td style="text-align: right;">2.56</td>
<td style="text-align: right;">167.72</td>
<td style="text-align: right;">168.84</td>
<td style="text-align: right;">170.17</td>
<td style="text-align: right;">172.52</td>
<td style="text-align: right;">178.18</td>
<td style="text-align: left;">▇▅▂▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">height</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">849.75</td>
<td style="text-align: right;">861.94</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">73.19</td>
<td style="text-align: right;">368.05</td>
<td style="text-align: right;">1682.50</td>
<td style="text-align: right;">3194.00</td>
<td style="text-align: left;">▇▁▃▂▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check ddata for sites with no matches in site.info</span></span>
<span id="cb48-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb48-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">anti_join</span>(ddata, site.info, <span class="at">by =</span> <span class="fu">join_by</span>(Site))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 8
# ℹ 8 variables: Group &lt;chr&gt;, Project &lt;chr&gt;, Site &lt;chr&gt;, SampleID &lt;chr&gt;,
#   year &lt;dbl&gt;, month &lt;dbl&gt;, d18O &lt;dbl&gt;, Date &lt;date&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb50-1" aria-hidden="true" tabindex="-1"></a>site.info.missing.ELEVATION <span class="ot">&lt;-</span> data.Excel.site.info.orig <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rownumber =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(site.info), <span class="at">.before =</span> Site) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(ELEVATION))</span>
<span id="cb50-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb50-4" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(site.info.missing.ELEVATION , <span class="at">path =</span> <span class="st">"output/site.info.missing.ELEVATION.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Retain just the site information for those sites in monthly data.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-8_e42b61c3d5e0e3a783e91fcafa432f42">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb51-1" aria-hidden="true" tabindex="-1"></a>site.info.match <span class="ot">&lt;-</span> site.info <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">semi_join</span>(ddata, <span class="at">by =</span> <span class="fu">join_by</span>(Site))</span>
<span id="cb51-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(site.info.match)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 97</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(ddata<span class="sc">$</span>Site))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 97</code></pre>
</div>
</div>
</section>
<section id="temporal-span-by-site" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="temporal-span-by-site"><span class="header-section-number">2.4</span> Temporal span by site<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#temporal-span-by-site" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-9_7a47c3f86f5a1fdd2dd9417689cb98a1">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb55-1" aria-hidden="true" tabindex="-1"></a>number.samples.before<span class="fl">.2000</span> <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span></span>
<span id="cb55-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb55-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb55-5" aria-hidden="true" tabindex="-1"></a>percent.before<span class="fl">.2000</span> <span class="ot">&lt;-</span> number.samples.before<span class="fl">.2000</span><span class="sc">/</span><span class="fu">nrow</span>(ddata)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Except for the two “GNIP” sites at Invercargill and Kaitaia, all the data are after the year 2000. The number of samples before the 2000 year is 401 which is 15% of the samples.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-10_e13ebb72bf7fa37944bd0d735e211c64">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ddata, <span class="fu">aes</span>(<span class="at">x=</span> Date, <span class="at">y =</span> Site)) <span class="sc">+</span></span>
<span id="cb56-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb56-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot-site-locations" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="plot-site-locations"><span class="header-section-number">2.5</span> Plot site locations<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plot-site-locations" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Site location is shown by North Island and South Island.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-11_e0e3f444281b1eb49316f198630d69e4">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_site_locations</span>(site.info.match, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, </span>
<span id="cb57-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb57-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">island =</span> <span class="st">"NI"</span>, </span>
<span id="cb57-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb57-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max.overlaps =</span> <span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values (`geom_label_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_site_locations</span>(site.info.match, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, </span>
<span id="cb65-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb65-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">island =</span> <span class="st">"SI"</span>, </span>
<span id="cb65-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb65-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max.overlaps =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 34 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 34 rows containing missing values (`geom_label_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-11-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_site_locations</span>(site.info.match, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, </span>
<span id="cb73-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb73-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">island =</span> <span class="st">"upper SI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 66 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 66 rows containing missing values (`geom_label_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-11-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_site_locations</span>(site.info.match, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, </span>
<span id="cb81-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb81-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">island =</span> <span class="st">"lower SI"</span>, </span>
<span id="cb81-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb81-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max.overlaps =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 65 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 65 rows containing missing values (`geom_label_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-11-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="spatial-distribution-of-number-of-observations" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="spatial-distribution-of-number-of-observations"><span class="header-section-number">2.6</span> Spatial distribution of number of observations<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-number-of-observations" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-12_2bef7a7698f7dda8bb92832e5d6ff355">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb89-1" aria-hidden="true" tabindex="-1"></a>table.obs.by.site <span class="ot">&lt;-</span> <span class="fu">count</span>(ddata, Site) <span class="sc">|&gt;</span>  </span>
<span id="cb89-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(site.info, <span class="at">by =</span> <span class="fu">join_by</span>(Site)) <span class="sc">|&gt;</span> </span>
<span id="cb89-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, <span class="st">`</span><span class="at">Number of observations</span><span class="st">`</span> <span class="ot">=</span> n)  </span>
<span id="cb89-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(table.obs.by.site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>,                          <span class="st">"Number of observations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot-raw-data-time-series-by-site" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="plot-raw-data-time-series-by-site"><span class="header-section-number">2.7</span> Plot raw data time series by site<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plot-raw-data-time-series-by-site" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The raw data are from different years, and notably some from GNIP site goes back to 1960 and 1980. The minimum date over all sites is 1962-10-15 and the maximum date is 2023-12-01.</p>
<p>Sites are plotted in alphabetical order.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/raw d18O plotted_6d28ebe2dc00004c1929252500efd350">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-1" aria-hidden="true" tabindex="-1"></a>the.sites <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb92-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Site) <span class="sc">|&gt;</span></span>
<span id="cb92-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Site)</span>
<span id="cb92-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_raw</span>(ddata,  <span class="st">"Site"</span>, <span class="st">"Date"</span>, <span class="st">"d18O"</span>, </span>
<span id="cb92-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Raw d18O by site"</span>,</span>
<span id="cb92-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">sites =</span> the.sites<span class="sc">$</span>Site[<span class="dv">1</span><span class="sc">:</span><span class="dv">21</span>], </span>
<span id="cb92-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb92-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">plot.scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: span too small.  fewer data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: pseudoinverse used at 18792</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: neighborhood radius 61.61</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: reciprocal condition number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: There are other near singularities as well. 3795.8</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : span too small.  fewer
data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
18792</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
61.61</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : There are other near
singularities as well. 3795.8</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/raw d18O plotted-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_raw</span>(ddata, <span class="st">"Site"</span>, <span class="st">"Date"</span>, <span class="st">"d18O"</span>, </span>
<span id="cb105-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb105-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Raw d18O by site"</span>, </span>
<span id="cb105-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb105-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">sites =</span> the.sites<span class="sc">$</span>Site[<span class="dv">22</span><span class="sc">:</span><span class="dv">42</span>], </span>
<span id="cb105-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb105-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">plot.scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: span too small.  fewer data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: pseudoinverse used at 13708</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: neighborhood radius 92.615</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: reciprocal condition number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: There are other near singularities as well. 8577.5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : span too small.  fewer
data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
13708</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
92.615</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : There are other near
singularities as well. 8577.5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/raw d18O plotted-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_raw</span>(ddata,  <span class="st">"Site"</span>, <span class="st">"Date"</span>, <span class="st">"d18O"</span>, </span>
<span id="cb118-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb118-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Raw d18O by site"</span>,</span>
<span id="cb118-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb118-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">sites =</span> the.sites<span class="sc">$</span>Site[<span class="dv">43</span><span class="sc">:</span><span class="dv">63</span>], </span>
<span id="cb118-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb118-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">plot.scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: span too small.  fewer data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: pseudoinverse used at 13708</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: neighborhood radius 62.615</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: reciprocal condition number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: There are other near singularities as well. 3796.4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : span too small.  fewer
data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
13708</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
62.615</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : There are other near
singularities as well. 3796.4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: Chernobyl! trL&gt;n 6

Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: Chernobyl! trL&gt;n 6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(sum.squares/one.delta): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stats::qt(level/2 + 0.5, pred$df): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: Chernobyl! trL&gt;n 6

Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: Chernobyl! trL&gt;n 6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(sum.squares/one.delta): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stats::qt(level/2 + 0.5, pred$df): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf

Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf

Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/raw d18O plotted-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_raw</span>(ddata,  <span class="st">"Site"</span>, <span class="st">"Date"</span>, <span class="st">"d18O"</span>, </span>
<span id="cb137-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb137-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Raw d18O by site"</span>,</span>
<span id="cb137-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb137-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">sites =</span> the.sites<span class="sc">$</span>Site[<span class="dv">64</span><span class="sc">:</span><span class="dv">84</span>], </span>
<span id="cb137-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb137-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">plot.scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: span too small.  fewer data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: pseudoinverse used at 18792</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: neighborhood radius 92.61</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: reciprocal condition number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: There are other near singularities as well. 8576.6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : span too small.  fewer
data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
18792</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
92.61</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : There are other near
singularities as well. 8576.6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/raw d18O plotted-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_raw</span>(ddata,  <span class="st">"Site"</span>, <span class="st">"Date"</span>, <span class="st">"d18O"</span>, </span>
<span id="cb150-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb150-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Raw d18O by site"</span>,</span>
<span id="cb150-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb150-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">sites =</span> the.sites<span class="sc">$</span>Site[<span class="dv">85</span><span class="sc">:</span><span class="fu">nrow</span>(the.sites)], </span>
<span id="cb150-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb150-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">plot.scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: span too small.  fewer data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: pseudoinverse used at 18793</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: neighborhood radius 61.46</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: reciprocal condition number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
: There are other near singularities as well. 3901.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(sum.squares/one.delta): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : span too small.  fewer
data values than degrees of freedom.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
18793</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
61.46</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
number 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predLoess(object$y, object$x, newx = if (is.null(newdata)) object$x
else if (is.data.frame(newdata))
as.matrix(model.frame(delete.response(terms(object)), : There are other near
singularities as well. 3901.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stats::qt(level/2 + 0.5, pred$df): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
-Inf</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/raw d18O plotted-5.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-13_cd89ead6cacbfaadc9f91978010e962c">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ddata, <span class="fu">aes</span>(Date)) <span class="sc">+</span></span>
<span id="cb165-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb165-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"5 year"</span>,</span>
<span id="cb165-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb165-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">date_minor_breaks =</span> <span class="st">"1 year"</span>,</span>
<span id="cb165-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb165-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">date_labels =</span> <span class="st">"%Y"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb166-1" aria-hidden="true" tabindex="-1"></a>table.num.obs.by.year <span class="ot">&lt;-</span> <span class="fu">count</span>(ddata, year)</span>
<span id="cb166-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(table.num.obs.by.year, <span class="at">n =</span> <span class="fu">nrow</span>(table.num.obs.by.year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42 × 2
    year     n
   &lt;dbl&gt; &lt;int&gt;
 1  1962     3
 2  1963    12
 3  1967     1
 4  1972     1
 5  1973    12
 6  1974    10
 7  1975    12
 8  1976    12
 9  1977    21
10  1978    24
11  1979    22
12  1980    22
13  1981    22
14  1982    24
15  1983    24
16  1984    14
17  1985    22
18  1986    24
19  1987    24
20  1988    24
21  1989    24
22  1990    24
23  1991    23
24  2005    12
25  2006    12
26  2007   300
27  2008   578
28  2009   533
29  2010    67
30  2011    10
31  2012    12
32  2013    12
33  2014    17
34  2015   197
35  2016    82
36  2017     6
37  2018    41
38  2019    51
39  2020     6
40  2021    67
41  2022   169
42  2023   140</code></pre>
</div>
</div>
</section>
</section>
<section id="appending-vcsn-daily-climate-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Appending VCSN daily climate data</h1>
<section id="site-and-nearest-vcsn-daily-climate-data" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="site-and-nearest-vcsn-daily-climate-data"><span class="header-section-number">3.1</span> Site and nearest VCSN daily climate data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#site-and-nearest-vcsn-daily-climate-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>These are extracted for all years in the isotope data. This takes a long time (2-3 days), so is done once and saved, then results are loaded. A preferable faster approach would be directly extract VCSN <em>monthly</em> summary data from the CLIDB database. Monthly being the resolution of the precipitation isotope data.</p>
<p><a href="https://niwa.co.nz/climate/our-services/virtual-climate-stations" class="uri">https://niwa.co.nz/climate/our-services/virtual-climate-stations</a></p>
<p>The climate fields in the VCSN data are identified as</p>
<p><a href="https://oneniwa.atlassian.net/wiki/spaces/CLIDB/pages/64520478/VCSN+Times+and+Field+Descriptions#VCSNTimesandFieldDescriptions-VCSNTimesandFieldDescriptions" class="uri">https://oneniwa.atlassian.net/wiki/spaces/CLIDB/pages/64520478/VCSN+Times+and+Field+Descriptions#VCSNTimesandFieldDescriptions-VCSNTimesandFieldDescriptions</a></p>
<p>MSLP (Mean Sea Level Pressure) PET (Potential Evapotranspiration) Rain (daily rainfall) RH (relative humidity) SoilM (soil moisture) ETmp (earth temperature at 10cm depth) Rad (solar radiation) TMax (maximum temperature) Tmin (minimum temperature) VP (vapour pressure) Wind (average wind speed at 10m above ground level) Rain_bc (Rainfall with bias correction) Tmax_N (maximum temperature via different method) Tmin_N (minimum temperature via different method)</p>
<p>Potential evaporation or potential evapotranspiration is defined as the amount of evaporation that would occur if a sufficient water source were available.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-14_f7924ef595f317953c0f9d7215cdb738">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-1" aria-hidden="true" tabindex="-1"></a>VCSN.directory <span class="ot">&lt;-</span> <span class="st">"Q:/CLIMATE/vcsn_data/"</span></span>
<span id="cb168-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="co"># need to cover the years in the data</span></span>
<span id="cb168-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  - start in 1962</span></span>
<span id="cb168-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-4" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(ddata<span class="sc">$</span>year))</span>
<span id="cb168-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="co"># site.info.plus.climate.data &lt;- vcsn_append_climate_information(site.info.match,</span></span>
<span id="cb168-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                                VCSN.directory,</span></span>
<span id="cb168-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                                years)</span></span>
<span id="cb168-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="co"># save(site.info.plus.climate.data, file = "data/site.info.plus.climate.data.RData")</span></span>
<span id="cb168-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"data/site.info.plus.climate.data.RData"</span>)</span>
<span id="cb168-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-14" aria-hidden="true" tabindex="-1"></a>site.info.plus.climate.data <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb168-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(Date), <span class="at">.after =</span> Date)</span>
<span id="cb168-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb168-17" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(site.info.plus.climate.data, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 24
  Site   area     lat   lon height VCSN.Agent VCSN.lat VCSN.lon Date        year
  &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;
1 FREW 1 Far N… -35.1  173.   35.0      20661    -35.1     173. 1962-01-01  1962
2 FREW 2 Kaipa… -36.0  174.   31.4      21431    -36.0     174. 1962-01-01  1962
3 FREW 3 Whang… -35.6  174.   71.4      21815    -35.6     174. 1962-01-01  1962
4 FREW 4 Far N… -35.4  174.  197.       29644    -35.4     174. 1962-01-01  1962
5 FREW 5 Far N… -35.3  174.   33.8      21536    -35.3     174. 1962-01-01  1962
# ℹ 14 more variables: MSLP &lt;dbl&gt;, PET &lt;dbl&gt;, Rain &lt;dbl&gt;, RH &lt;dbl&gt;,
#   SoilM &lt;dbl&gt;, ETmp &lt;dbl&gt;, Rad &lt;dbl&gt;, TMax &lt;dbl&gt;, Tmin &lt;dbl&gt;, VP &lt;dbl&gt;,
#   Wind &lt;dbl&gt;, Rain_bc &lt;dbl&gt;, Tmax_N &lt;dbl&gt;, Tmin_N &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incomplete data for some VCSN quantities</span></span>
<span id="cb170-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb170-2" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(site.info.plus.climate.data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">site.info.plus.climate.da…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1503222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Site</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">area</td>
<td style="text-align: right;">61356</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">1962-01-01</td>
<td style="text-align: left;">2023-12-31</td>
<td style="text-align: left;">1989-12-31</td>
<td style="text-align: right;">15339</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">-42.10</td>
<td style="text-align: right;">3.59</td>
<td style="text-align: right;">-46.88</td>
<td style="text-align: right;">-45.38</td>
<td style="text-align: right;">-43.25</td>
<td style="text-align: right;">-39.02</td>
<td style="text-align: right;">-34.58</td>
<td style="text-align: left;">▇▆▂▃▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">lon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">171.96</td>
<td style="text-align: right;">2.87</td>
<td style="text-align: right;">167.72</td>
<td style="text-align: right;">169.01</td>
<td style="text-align: right;">171.80</td>
<td style="text-align: right;">174.48</td>
<td style="text-align: right;">178.18</td>
<td style="text-align: left;">▇▅▅▆▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">height</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">253.72</td>
<td style="text-align: right;">399.24</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">35.32</td>
<td style="text-align: right;">85.79</td>
<td style="text-align: right;">276.09</td>
<td style="text-align: right;">1892.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">VCSN.Agent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">19382.91</td>
<td style="text-align: right;">7171.54</td>
<td style="text-align: right;">7515.00</td>
<td style="text-align: right;">14196.00</td>
<td style="text-align: right;">19767.00</td>
<td style="text-align: right;">27582.00</td>
<td style="text-align: right;">31173.00</td>
<td style="text-align: left;">▅▇▇▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VCSN.lat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">-42.10</td>
<td style="text-align: right;">3.58</td>
<td style="text-align: right;">-46.88</td>
<td style="text-align: right;">-45.38</td>
<td style="text-align: right;">-43.25</td>
<td style="text-align: right;">-39.02</td>
<td style="text-align: right;">-34.58</td>
<td style="text-align: left;">▇▆▂▃▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">VCSN.lon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">171.96</td>
<td style="text-align: right;">2.88</td>
<td style="text-align: right;">167.72</td>
<td style="text-align: right;">169.02</td>
<td style="text-align: right;">171.80</td>
<td style="text-align: right;">174.48</td>
<td style="text-align: right;">178.18</td>
<td style="text-align: left;">▇▅▅▆▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1994.95</td>
<td style="text-align: right;">18.67</td>
<td style="text-align: right;">1962.00</td>
<td style="text-align: right;">1979.00</td>
<td style="text-align: right;">1989.00</td>
<td style="text-align: right;">2013.00</td>
<td style="text-align: right;">2023.00</td>
<td style="text-align: left;">▃▇▃▃▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">MSLP</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">870.56</td>
<td style="text-align: right;">518.69</td>
<td style="text-align: right;">-999.90</td>
<td style="text-align: right;">1006.00</td>
<td style="text-align: right;">1014.30</td>
<td style="text-align: right;">1020.70</td>
<td style="text-align: right;">1044.50</td>
<td style="text-align: left;">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PET</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">2.33</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">3.60</td>
<td style="text-align: right;">15.40</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rain</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">11.28</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">482.90</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RH</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">81.18</td>
<td style="text-align: right;">10.74</td>
<td style="text-align: right;">18.20</td>
<td style="text-align: right;">74.70</td>
<td style="text-align: right;">82.80</td>
<td style="text-align: right;">89.50</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">▁▁▂▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">SoilM</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">-40.02</td>
<td style="text-align: right;">47.36</td>
<td style="text-align: right;">-151.20</td>
<td style="text-align: right;">-79.60</td>
<td style="text-align: right;">-23.10</td>
<td style="text-align: right;">-2.30</td>
<td style="text-align: right;">329.60</td>
<td style="text-align: left;">▅▇▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ETmp</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">10.78</td>
<td style="text-align: right;">5.66</td>
<td style="text-align: right;">-10.40</td>
<td style="text-align: right;">6.50</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: right;">15.10</td>
<td style="text-align: right;">27.50</td>
<td style="text-align: left;">▁▃▇▇▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rad</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">13.50</td>
<td style="text-align: right;">7.95</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">6.90</td>
<td style="text-align: right;">11.90</td>
<td style="text-align: right;">19.40</td>
<td style="text-align: right;">47.30</td>
<td style="text-align: left;">▇▇▅▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TMax</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">15.91</td>
<td style="text-align: right;">5.76</td>
<td style="text-align: right;">-11.70</td>
<td style="text-align: right;">12.30</td>
<td style="text-align: right;">16.10</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">40.50</td>
<td style="text-align: left;">▁▂▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tmin</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">6.69</td>
<td style="text-align: right;">5.37</td>
<td style="text-align: right;">-16.90</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">6.90</td>
<td style="text-align: right;">10.60</td>
<td style="text-align: right;">24.30</td>
<td style="text-align: left;">▁▂▇▇▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VP</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">11.08</td>
<td style="text-align: right;">3.61</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">8.40</td>
<td style="text-align: right;">10.60</td>
<td style="text-align: right;">13.30</td>
<td style="text-align: right;">30.40</td>
<td style="text-align: left;">▃▇▃▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">823200</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">3.68</td>
<td style="text-align: right;">2.05</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.20</td>
<td style="text-align: right;">3.20</td>
<td style="text-align: right;">4.60</td>
<td style="text-align: right;">25.70</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rain_bc</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">10.81</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.30</td>
<td style="text-align: right;">492.70</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tmax_N</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">15.84</td>
<td style="text-align: right;">5.74</td>
<td style="text-align: right;">-12.50</td>
<td style="text-align: right;">12.20</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">19.90</td>
<td style="text-align: right;">40.70</td>
<td style="text-align: left;">▁▂▇▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tmin_N</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">6.75</td>
<td style="text-align: right;">5.34</td>
<td style="text-align: right;">-18.10</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">6.90</td>
<td style="text-align: right;">10.60</td>
<td style="text-align: right;">24.10</td>
<td style="text-align: left;">▁▁▇▇▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># no data for some earlier years and many climate variables</span></span>
<span id="cb171-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb171-2" aria-hidden="true" tabindex="-1"></a>site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb171-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(PET)) <span class="sc">|&gt;</span></span>
<span id="cb171-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb171-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">count</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
   year     n
  &lt;dbl&gt; &lt;int&gt;
1  1962 35770
2  1963 35770
3  1967 35770</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace -999.9 for MSLP with NA</span></span>
<span id="cb173-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb173-2" aria-hidden="true" tabindex="-1"></a>MSLP.need.replacing <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb173-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MSLP <span class="sc">==</span> <span class="sc">-</span><span class="fl">999.9</span>)</span>
<span id="cb173-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb173-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(MSLP.need.replacing, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
   year     n
  &lt;dbl&gt; &lt;int&gt;
1  1962 35770
2  1963 35770
3  1967 35770</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb175-1" aria-hidden="true" tabindex="-1"></a>site.info.plus.climate.data <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb175-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MSLP =</span> <span class="fu">na_if</span>(MSLP, <span class="sc">-</span><span class="fl">999.9</span>))</span>
<span id="cb175-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb175-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb175-4" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(site.info.plus.climate.data, MSLP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">site.info.plus.climate.da…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1503222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MSLP</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">1014.35</td>
<td style="text-align: right;">9.72</td>
<td style="text-align: right;">967.7</td>
<td style="text-align: right;">1008.2</td>
<td style="text-align: right;">1015.2</td>
<td style="text-align: right;">1021.3</td>
<td style="text-align: right;">1044.5</td>
<td style="text-align: left;">▁▁▆▇▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb176-1" aria-hidden="true" tabindex="-1"></a>site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb176-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb176-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb176-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>(Wind)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">group_by(site.info.plus.c…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1503222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">year</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1963</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">35868</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1973</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1974</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1975</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1976</td>
<td style="text-align: right;">35868</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1978</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1979</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1980</td>
<td style="text-align: right;">35868</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1981</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1982</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1983</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1984</td>
<td style="text-align: right;">35868</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1985</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1986</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1988</td>
<td style="text-align: right;">35868</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1989</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">35770</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.64</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">18.9</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.99</td>
<td style="text-align: right;">2.20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.4</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.77</td>
<td style="text-align: right;">2.11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.78</td>
<td style="text-align: right;">2.08</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.83</td>
<td style="text-align: right;">2.14</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">21.3</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.73</td>
<td style="text-align: right;">2.11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2011</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.75</td>
<td style="text-align: right;">2.14</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.66</td>
<td style="text-align: right;">2.13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">19.1</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.55</td>
<td style="text-align: right;">1.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.1</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2014</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.76</td>
<td style="text-align: right;">2.15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">25.7</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2015</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.75</td>
<td style="text-align: right;">2.05</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2016</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.63</td>
<td style="text-align: right;">2.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">20.9</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.50</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.1</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">20.5</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2018</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.47</td>
<td style="text-align: right;">1.89</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">4.3</td>
<td style="text-align: right;">17.3</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2019</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.66</td>
<td style="text-align: right;">1.96</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">16.8</td>
<td style="text-align: left;">▇▆▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2020</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.64</td>
<td style="text-align: right;">2.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.60</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">19.1</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2022</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.55</td>
<td style="text-align: right;">1.93</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.74</td>
<td style="text-align: right;">2.03</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">21.2</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb177-1" aria-hidden="true" tabindex="-1"></a>site.info.plus.climate.data<span class="fl">.1960</span>s <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb177-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">1963</span>, <span class="dv">1967</span>))</span>
<span id="cb177-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb177-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Just Rain, Rain_bc columns in the data</span></span>
<span id="cb177-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb177-5" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(site.info.plus.climate.data<span class="fl">.1960</span>s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">site.info.plus.climate.da…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">107310</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Site</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">area</td>
<td style="text-align: right;">4380</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">1962-01-01</td>
<td style="text-align: left;">1967-12-31</td>
<td style="text-align: left;">1963-07-02</td>
<td style="text-align: right;">1095</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-42.10</td>
<td style="text-align: right;">3.59</td>
<td style="text-align: right;">-46.88</td>
<td style="text-align: right;">-45.38</td>
<td style="text-align: right;">-43.25</td>
<td style="text-align: right;">-39.02</td>
<td style="text-align: right;">-34.58</td>
<td style="text-align: left;">▇▆▂▃▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">lon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">171.96</td>
<td style="text-align: right;">2.87</td>
<td style="text-align: right;">167.72</td>
<td style="text-align: right;">169.01</td>
<td style="text-align: right;">171.80</td>
<td style="text-align: right;">174.48</td>
<td style="text-align: right;">178.18</td>
<td style="text-align: left;">▇▅▅▆▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">height</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">253.72</td>
<td style="text-align: right;">399.24</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">35.32</td>
<td style="text-align: right;">85.79</td>
<td style="text-align: right;">276.09</td>
<td style="text-align: right;">1892.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">VCSN.Agent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">19382.91</td>
<td style="text-align: right;">7171.57</td>
<td style="text-align: right;">7515.00</td>
<td style="text-align: right;">14196.00</td>
<td style="text-align: right;">19767.00</td>
<td style="text-align: right;">27582.00</td>
<td style="text-align: right;">31173.00</td>
<td style="text-align: left;">▅▇▇▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VCSN.lat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-42.10</td>
<td style="text-align: right;">3.58</td>
<td style="text-align: right;">-46.88</td>
<td style="text-align: right;">-45.38</td>
<td style="text-align: right;">-43.25</td>
<td style="text-align: right;">-39.02</td>
<td style="text-align: right;">-34.58</td>
<td style="text-align: left;">▇▆▂▃▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">VCSN.lon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">171.96</td>
<td style="text-align: right;">2.88</td>
<td style="text-align: right;">167.72</td>
<td style="text-align: right;">169.02</td>
<td style="text-align: right;">171.80</td>
<td style="text-align: right;">174.48</td>
<td style="text-align: right;">178.18</td>
<td style="text-align: left;">▇▅▅▆▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1964.00</td>
<td style="text-align: right;">2.16</td>
<td style="text-align: right;">1962.00</td>
<td style="text-align: right;">1962.00</td>
<td style="text-align: right;">1963.00</td>
<td style="text-align: right;">1967.00</td>
<td style="text-align: right;">1967.00</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">MSLP</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">PET</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Rain</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.04</td>
<td style="text-align: right;">11.60</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">341.60</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RH</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">SoilM</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">ETmp</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Rad</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">TMax</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Tmin</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">VP</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Wind</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rain_bc</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">11.07</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.40</td>
<td style="text-align: right;">348.90</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tmax_N</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tmin_N</td>
<td style="text-align: right;">107310</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-1" aria-hidden="true" tabindex="-1"></a>num.sites <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(ddata<span class="sc">$</span>Site))</span>
<span id="cb178-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 365*91 = 33215 observations in year (for 91 sites)</span></span>
<span id="cb178-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-4" aria-hidden="true" tabindex="-1"></a>table.num.climate.obs.by.year <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb178-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> MSLP<span class="sc">:</span>Tmin_N, </span>
<span id="cb178-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Quantity"</span>, </span>
<span id="cb178-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Value"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb178-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Value) <span class="sc">|&gt;</span></span>
<span id="cb178-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, Quantity) <span class="sc">|&gt;</span></span>
<span id="cb178-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Quantity, </span>
<span id="cb178-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb178-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number of sites is 97. So in a year with 365/366 days the maximum number of daily VCSN climate observations at a site is 3.5405^{4} or 3.5502^{4}. Looking over all years and VCSN climate observations types, all columns are complete from 1972, except for “Wind” which turns up in 2005.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-15_ce64302ed3fbaba2beaae80df45a7c18">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ft</span>(table.num.climate.obs.by.year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="flextable-shadow-host"><template shadowrootmode="open"><div class="tabwid"><style>.cl-1450008a{}.cl-143ae56a{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-143ae57e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1442dd7e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1442fbe2{width:0.668in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fbf6{width:0.752in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc00{width:0.846in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc01{width:0.862in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc0a{width:0.82in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc0b{width:0.668in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc1e{width:0.752in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc1f{width:0.846in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc20{width:0.862in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc28{width:0.82in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc32{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc33{width:0.752in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc3c{width:0.846in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc3d{width:0.862in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1442fc46{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-1450008a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-1442fbe2"><p class="cl-1442dd7e"><span class="cl-143ae56a">year</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">Rain</span></p></th><th class="cl-1442fc00"><p class="cl-1442dd7e"><span class="cl-143ae56a">Rain_bc</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">ETmp</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">MSLP</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">PET</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">RH</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">Rad</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">SoilM</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">TMax</span></p></th><th class="cl-1442fc01"><p class="cl-1442dd7e"><span class="cl-143ae56a">Tmax_N</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">Tmin</span></p></th><th class="cl-1442fc0a"><p class="cl-1442dd7e"><span class="cl-143ae56a">Tmin_N</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">VP</span></p></th><th class="cl-1442fbf6"><p class="cl-1442dd7e"><span class="cl-143ae56a">Wind</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,962</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,963</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,967</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,972</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,973</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,974</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,975</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,976</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,977</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,978</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,979</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,980</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,981</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,982</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,983</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,984</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,985</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,986</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,987</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,988</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,989</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,990</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">1,991</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,005</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,006</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,007</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,008</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,009</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,010</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,011</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,012</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,013</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,014</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,015</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,016</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,017</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,018</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,019</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,020</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,868</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,021</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc0b"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,022</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1f"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc20"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc28"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc1e"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1442fc32"><p class="cl-1442dd7e"><span class="cl-143ae57e">2,023</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3c"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc3d"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc46"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td><td class="cl-1442fc33"><p class="cl-1442dd7e"><span class="cl-143ae57e">35,770</span></p></td></tr></tbody></table></div><link href="./XGBoost_files/tabwid.css" rel="stylesheet"></template></div>
</div>
</div>
<p><em>Tmin</em> and <em>TMax</em> are dropped, with the Norton adjust versions <em>Tmin_N</em> and <em>Tmax_N</em> retained. Similarly <em>Rain</em> is dropped with the bias-corrected version <em>Rain_bc</em> retained.</p>
<p>The isotope measurements at each site are monthly (nominally the middle of the month), and need associated VCSN monthly climate values associated with them. Hence the daily VCSN climate data are reduced to monthly mean values at each site.</p>
<p>Height at the site is retained for the monthly summary data, although of course it remains unchanged.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-16_c5543d0872c26003679d88e37f0bacb7">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-1" aria-hidden="true" tabindex="-1"></a>site.info.climate.monthly <span class="ot">&lt;-</span> site.info.plus.climate.data <span class="sc">|&gt;</span></span>
<span id="cb180-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Tmin, <span class="sc">-</span>TMax, <span class="sc">-</span>Rain) <span class="sc">|&gt;</span></span>
<span id="cb180-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(Date), </span>
<span id="cb180-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">year  =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(Date)</span>
<span id="cb180-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-5" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span></span>
<span id="cb180-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(MSLP<span class="sc">:</span>Tmin_N, <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), </span>
<span id="cb180-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(Site, height, area, lat, lon, year, month)</span>
<span id="cb180-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-8" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">|&gt;</span></span>
<span id="cb180-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Site, year, month)</span>
<span id="cb180-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-11" aria-hidden="true" tabindex="-1"></a><span class="co"># clear out the memory</span></span>
<span id="cb180-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(site.info.plus.climate.data)</span>
<span id="cb180-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb180-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(site.info.plus.climate.data<span class="fl">.1960</span>s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="isotope-data-appended-with-monthly-mean-vcsn-climate-data" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="isotope-data-appended-with-monthly-mean-vcsn-climate-data"><span class="header-section-number">3.2</span> Isotope data appended with monthly mean VCSN climate data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#isotope-data-appended-with-monthly-mean-vcsn-climate-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>To the monthly isotope measurements at each site, are appended the monthly mean VCSN climate data for the year of the isotope measurement.</p>
<p>Dropped for the modelling data set are <em>SampleID</em>, <em>variable</em>, <em>agent.number</em>, <em>Date</em>, <em>area</em>, <em>year</em></p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-17_3c1c085e0e15f76870c11474771aac85">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-1" aria-hidden="true" tabindex="-1"></a>all.data <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb181-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(site.info.climate.monthly) <span class="sc">|&gt;</span></span>
<span id="cb181-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(area, <span class="at">.after =</span> Site) <span class="sc">|&gt;</span></span>
<span id="cb181-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">factor</span>(month.abb[month], <span class="at">levels =</span> month.abb, <span class="at">ordered =</span> <span class="cn">TRUE</span>), </span>
<span id="cb181-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> lat) <span class="sc">|&gt;</span></span>
<span id="cb181-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb181-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(d18O) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Site, year, month)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For exploratory correlation analysis drop fields that are not mean values VCSN data</span></span>
<span id="cb183-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-2" aria-hidden="true" tabindex="-1"></a>iso.data <span class="ot">&lt;-</span> all.data <span class="sc">|&gt;</span></span>
<span id="cb183-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SampleID, <span class="sc">-</span>Date, <span class="sc">-</span>Group, <span class="sc">-</span>Project, <span class="sc">-</span>Site, <span class="sc">-</span>area, <span class="sc">-</span>year) <span class="sc">|&gt;</span></span>
<span id="cb183-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>month)</span>
<span id="cb183-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iso.data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "d18O"    "height"  "Month"   "lat"     "lon"     "MSLP"    "PET"    
 [8] "RH"      "SoilM"   "ETmp"    "Rad"     "VP"      "Wind"    "Rain_bc"
[15] "Tmax_N"  "Tmin_N" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># As above, but retain the Site and Date variables for the model fit checking</span></span>
<span id="cb185-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb185-2" aria-hidden="true" tabindex="-1"></a>iso.data.Site <span class="ot">&lt;-</span> all.data <span class="sc">|&gt;</span></span>
<span id="cb185-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SampleID, <span class="sc">-</span>Group, <span class="sc">-</span>Project, <span class="sc">-</span>area, <span class="sc">-</span>year, <span class="sc">-</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="closer-look-at-gnip-invercargill-site-temporal-changes" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="closer-look-at-gnip-invercargill-site-temporal-changes"><span class="header-section-number">3.3</span> Closer look at GNIP INVERCARGILL site temporal changes<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#closer-look-at-gnip-invercargill-site-temporal-changes" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The distribution of the predicted variable d18O, and predictor variables, looks similar before and after year 2000. Note the <em>Wind</em> predictor variable is in the VCSN data for 2005 onward.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-18_d197f62b9dde492e0ca015826ff35c5a">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-1" aria-hidden="true" tabindex="-1"></a>inv.data.wide <span class="ot">&lt;-</span> all.data <span class="sc">|&gt;</span> </span>
<span id="cb186-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Site <span class="sc">==</span> <span class="st">"GNIP INVERCARGILL"</span>) <span class="sc">|&gt;</span></span>
<span id="cb186-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Group, <span class="sc">-</span>Project, <span class="sc">-</span>area, <span class="sc">-</span>SampleID, <span class="sc">-</span>year, <span class="sc">-</span>Month, <span class="sc">-</span>month,</span>
<span id="cb186-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">-</span>height, <span class="sc">-</span>Site, <span class="sc">-</span>lat, <span class="sc">-</span>lon) <span class="sc">|&gt;</span></span>
<span id="cb186-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(d18O, <span class="at">.after =</span> Tmin_N)</span>
<span id="cb186-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-7" aria-hidden="true" tabindex="-1"></a>inv.data.long <span class="ot">&lt;-</span> inv.data.wide <span class="sc">|&gt;</span></span>
<span id="cb186-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-8" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb186-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>Date,</span>
<span id="cb186-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Quantity"</span>,</span>
<span id="cb186-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"Value"</span></span>
<span id="cb186-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb186-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Value) <span class="sc">|&gt;</span></span>
<span id="cb186-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">After 2000</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(Date <span class="sc">&gt;</span> lubridate<span class="sc">::</span><span class="fu">make_date</span>(<span class="dv">2000</span>, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb186-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Yes"</span>,</span>
<span id="cb186-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"No"</span></span>
<span id="cb186-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-17" aria-hidden="true" tabindex="-1"></a>  )) </span>
<span id="cb186-18"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-19"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Values versus time</span></span>
<span id="cb186-20"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(inv.data.long, <span class="fu">aes</span>(Date, Value)) <span class="sc">+</span></span>
<span id="cb186-21"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb186-22"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb186-23"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb186-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Quantity), <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Density plots before and after 200</span></span>
<span id="cb188-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(inv.data.long, <span class="fu">aes</span>(Value, </span>
<span id="cb188-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> <span class="st">`</span><span class="at">After 2000</span><span class="st">`</span>,</span>
<span id="cb188-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">group =</span> <span class="st">`</span><span class="at">After 2000</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb188-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb188-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb188-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Quantity), <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-18-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="isotope-data-for-2000-onward" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="isotope-data-for-2000-onward"><span class="header-section-number">3.4</span> Isotope data for 2000 onward<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#isotope-data-for-2000-onward" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-19_d3ee7450b40425d98e341e35b10c2837">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-1" aria-hidden="true" tabindex="-1"></a>iso.data.<span class="fl">2000.</span>onward <span class="ot">&lt;-</span> all.data <span class="sc">|&gt;</span></span>
<span id="cb189-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span></span>
<span id="cb189-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SampleID, <span class="sc">-</span>Date, <span class="sc">-</span>Group, <span class="sc">-</span>Project, <span class="sc">-</span>Site, <span class="sc">-</span>area, <span class="sc">-</span>year) <span class="sc">|&gt;</span></span>
<span id="cb189-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>month)</span>
<span id="cb189-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-6" aria-hidden="true" tabindex="-1"></a>iso.data.Site.<span class="fl">2000.</span>onward <span class="ot">&lt;-</span> all.data <span class="sc">|&gt;</span></span>
<span id="cb189-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span></span>
<span id="cb189-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb189-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SampleID, <span class="sc">-</span>Group, <span class="sc">-</span>Project, <span class="sc">-</span>area, <span class="sc">-</span>year, <span class="sc">-</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Exploratory data analysis</h1>
<section id="distribution-of-d180" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="distribution-of-d180"><span class="header-section-number">4.1</span> Distribution of d180<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#distribution-of-d180" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-20_c23e49a0bb3e39033fab1cbc57ffc7e8">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb190-1" aria-hidden="true" tabindex="-1"></a>min.d18O <span class="ot">&lt;-</span> <span class="fu">min</span>(iso.data<span class="sc">$</span>d18O, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb190-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb190-2" aria-hidden="true" tabindex="-1"></a>ddata.min.d18O <span class="ot">&lt;-</span> ddata <span class="sc">|&gt;</span></span>
<span id="cb190-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(d18O <span class="sc">==</span> min.d18O)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The minimum value of d18O is -24.14:</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-21_81c66f5bfb6ced5b0173de38c7290364">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb191-1" aria-hidden="true" tabindex="-1"></a>ddata.min.d18O</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  Group Project Site                  SampleID  year month  d18O Date      
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;                 &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    
1 NIWA  AOSnow  Ohau top weather plot &lt;NA&gt;      2021     7 -24.1 2021-07-15</code></pre>
</div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-22_2764920ee884cfaf0e2b5fd2bec71e7a">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> iso.data, <span class="fu">aes</span>(d18O)) <span class="sc">+</span></span>
<span id="cb193-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The “highest” mean values of d18O (most negative) occur in the centre of the South Island, and the lowest at the top of the North Island (which include the site GNIP Kaitaia).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-23_44cf51c3e7e1716b2da8ce43bc8b4704">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb195-1" aria-hidden="true" tabindex="-1"></a>mean.d18O.by.site <span class="ot">&lt;-</span> iso.data.Site <span class="sc">|&gt;</span></span>
<span id="cb195-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean.neg.d18O =</span> <span class="sc">-</span><span class="fu">mean</span>(d18O, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(Site, lat, lon))</span>
<span id="cb195-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_max</span>(mean.d18O.by.site, mean.neg.d18O, <span class="at">n =</span> <span class="dv">5</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  Site                             lat   lon mean.neg.d18O
  &lt;chr&gt;                          &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
1 Ohau top weather plot          -44.2  170.         12.0 
2 Remarkables Sugar Weather plot -45.1  169.         11.6 
3 Cardrona Base area             -44.9  169.         10.7 
4 Mt Hutt Admin carpark          -43.5  172.         10.2 
5 FREW 48                        -45.0  169.          9.90</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_min</span>(mean.d18O.by.site, mean.neg.d18O, <span class="at">n =</span> <span class="dv">5</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  Site           lat   lon mean.neg.d18O
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
1 FREW 8       -36.9  175.          3.12
2 FREW 9       -36.9  175.          3.21
3 FREW 3       -35.6  174.          4.42
4 FREW 6       -34.6  173.          4.44
5 GNIP KAITAIA -35.1  173.          4.48</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(mean.d18O.by.site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"mean.neg.d18O"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="correlations" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="correlations"><span class="header-section-number">4.2</span> Correlations<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#correlations" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>d18O has the highest correlation with Tmin_N (earth temperature at 10 cm depth), followed by ETmp. ETmp is highly correlated with VP.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-24_2e65037abf4e9a256b4a3ae74d991765">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># heatmap for correlation</span></span>
<span id="cb202-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb202-2" aria-hidden="true" tabindex="-1"></a>iso.data <span class="sc">|&gt;</span></span>
<span id="cb202-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb202-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Month) <span class="sc">|&gt;</span></span>
<span id="cb202-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb202-4" aria-hidden="true" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggcorr</span>(<span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">label_round =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-25_e57ce6497ca8ac770ed7b9dba5577a7e">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb203-1" aria-hidden="true" tabindex="-1"></a>iso.data <span class="sc">|&gt;</span></span>
<span id="cb203-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Month) <span class="sc">|&gt;</span></span>
<span id="cb203-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb203-3" aria-hidden="true" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">upper =</span> <span class="st">"blank"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Plotting up d18O vs continuous predictor with a smoothed loess curve shows some obvious correlations.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-26_72a603ffd6c48425e8b78952239a7ba6">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-1" aria-hidden="true" tabindex="-1"></a>d180.vs.climate <span class="ot">&lt;-</span> iso.data <span class="sc">|&gt;</span> </span>
<span id="cb204-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Month) <span class="sc">|&gt;</span></span>
<span id="cb204-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>d18O, <span class="at">names_to =</span> <span class="st">"Predictor"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb204-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-5" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(d180.vs.climate, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">y =</span> d18O)) <span class="sc">+</span></span>
<span id="cb204-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb204-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb204-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Predictor), <span class="at">scale =</span> <span class="st">"free_x"</span>)</span>
<span id="cb204-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb204-10" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 545 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 545 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And there are monthly patterns.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-27_3a99e9634cd157dbda19759a5cac60de">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iso.data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> d18O)) <span class="sc">+</span></span>
<span id="cb208-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A exploratory tree regression indicates that <em>Tmin_N</em> has the highest predictive power, and what other variables and their interactions are important.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-28_8d8704e1d4a44b830bcb15eb2ffeb769">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb209-1" aria-hidden="true" tabindex="-1"></a>tree.data <span class="ot">&lt;-</span> iso.data.Site <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>Site, <span class="sc">-</span>Date)</span>
<span id="cb209-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb209-2" aria-hidden="true" tabindex="-1"></a>tree.model <span class="ot">&lt;-</span> tree<span class="sc">::</span><span class="fu">tree</span>(d18O <span class="sc">~</span> ., <span class="at">data =</span> tree.data)</span>
<span id="cb209-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tree.model)</span>
<span id="cb209-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(tree.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="xgboost-model-all-data" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> XGBoost model all data</h1>
<section id="initial-data-split" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="initial-data-split"><span class="header-section-number">5.1</span> Initial data split<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#initial-data-split" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The data are split up into training data (80%) and test data (20%).</p>
<p>This is done within d18O quartile strata, then pooled. The use of d18O strata ensures that the there are similar distributions for the training and test data sets.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-29_73ab4917950682b13f520ce30c2f3617">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">386201</span>)</span>
<span id="cb210-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-2" aria-hidden="true" tabindex="-1"></a>iso.split <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(</span>
<span id="cb210-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> iso.data.Site,</span>
<span id="cb210-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop =</span> <span class="fl">0.80</span>,</span>
<span id="cb210-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb210-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-7" aria-hidden="true" tabindex="-1"></a>iso.training <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">training</span>(iso.split)</span>
<span id="cb210-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb210-8" aria-hidden="true" tabindex="-1"></a>iso.test     <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">testing</span>(iso.split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preprocessing" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="preprocessing"><span class="header-section-number">5.2</span> Preprocessing<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#preprocessing" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Make “Site” and “Date” identification variables to use in model fit checking.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-30_12ccc89fc4f0c80a71af846f42a344f7">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb211-1" aria-hidden="true" tabindex="-1"></a>preprocessing_recipe <span class="ot">&lt;-</span> </span>
<span id="cb211-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb211-2" aria-hidden="true" tabindex="-1"></a>  recipes<span class="sc">::</span><span class="fu">recipe</span>(d18O <span class="sc">~</span> ., <span class="at">data =</span> iso.training) <span class="sc">|&gt;</span></span>
<span id="cb211-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(Site, Date, <span class="at">new_role =</span> <span class="st">"ID"</span>) <span class="sc">|&gt;</span></span>
<span id="cb211-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb211-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-xgboost-model" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="setup-xgboost-model"><span class="header-section-number">5.3</span> Setup XGBoost model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-xgboost-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-31_88062583d41f392f72db01e3ad6ec6b7">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-1" aria-hidden="true" tabindex="-1"></a>xgboost_model <span class="ot">&lt;-</span> </span>
<span id="cb212-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  parsnip<span class="sc">::</span><span class="fu">boost_tree</span>(</span>
<span id="cb212-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">"regression"</span>,</span>
<span id="cb212-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="dv">1000</span>,</span>
<span id="cb212-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">tune</span>(),</span>
<span id="cb212-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb212-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">learn_rate =</span> <span class="fu">tune</span>(),</span>
<span id="cb212-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_reduction =</span> <span class="fu">tune</span>()</span>
<span id="cb212-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb212-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb212-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>, <span class="at">objective =</span> <span class="st">"reg:squarederror"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-workflow" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="setup-workflow"><span class="header-section-number">5.4</span> Setup workflow<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-workflow" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Define the workflow</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-32_8107365d1871de6fce113654c76e7209">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb213-1" aria-hidden="true" tabindex="-1"></a> xgboost_wf <span class="ot">&lt;-</span> </span>
<span id="cb213-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb213-2" aria-hidden="true" tabindex="-1"></a>   workflows<span class="sc">::</span><span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb213-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb213-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">add_model</span>(xgboost_model) <span class="sc">|&gt;</span> </span>
<span id="cb213-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb213-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">add_recipe</span>(preprocessing_recipe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="grid-specification" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="grid-specification"><span class="header-section-number">5.5</span> Grid specification<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#grid-specification" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-33_92041e2d5f974399c1110f7b181fcda9">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-1" aria-hidden="true" tabindex="-1"></a>xgboost_params <span class="ot">&lt;-</span> </span>
<span id="cb214-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-2" aria-hidden="true" tabindex="-1"></a>  dials<span class="sc">::</span><span class="fu">parameters</span>(</span>
<span id="cb214-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">min_n</span>(),</span>
<span id="cb214-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tree_depth</span>(),</span>
<span id="cb214-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">learn_rate</span>(),</span>
<span id="cb214-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">loss_reduction</span>()</span>
<span id="cb214-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb214-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-34_9196f603b0bb8e5b28eb990a8c8569d5">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-1" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> </span>
<span id="cb215-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-2" aria-hidden="true" tabindex="-1"></a>  dials<span class="sc">::</span><span class="fu">grid_max_entropy</span>(</span>
<span id="cb215-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-3" aria-hidden="true" tabindex="-1"></a>    xgboost_params, </span>
<span id="cb215-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">60</span></span>
<span id="cb215-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb215-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb215-7" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(xgboost_grid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">5.4802594</td>
</tr>
<tr class="even">
<td style="text-align: right;">20</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.0009559</td>
<td style="text-align: right;">3.9075138</td>
</tr>
<tr class="odd">
<td style="text-align: right;">19</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.0000211</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.0119502</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">20</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.0000016</td>
<td style="text-align: right;">0.1453725</td>
</tr>
<tr class="even">
<td style="text-align: right;">33</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.0000001</td>
<td style="text-align: right;">0.0015000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="cross-validation-split" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="cross-validation-split"><span class="header-section-number">5.6</span> Cross validation split<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cross-validation-split" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-35_fa8e2244fb8a8eeb170c1390ac7be781">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">8493</span>)</span>
<span id="cb216-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb216-2" aria-hidden="true" tabindex="-1"></a>iso.cv.folds <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">vfold_cv</span>(iso.training, <span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tune-the-model" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="tune-the-model"><span class="header-section-number">5.7</span> Tune the model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#tune-the-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-36_9a7824fd51a1642205e2a7b480837f0a">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># hyperparameter tuning</span></span>
<span id="cb217-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-2" aria-hidden="true" tabindex="-1"></a>xgboost_tuned <span class="ot">&lt;-</span> tune<span class="sc">::</span><span class="fu">tune_grid</span>(</span>
<span id="cb217-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> xgboost_wf,</span>
<span id="cb217-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> iso.cv.folds,</span>
<span id="cb217-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> xgboost_grid,</span>
<span id="cb217-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> yardstick<span class="sc">::</span><span class="fu">metric_set</span>(rmse, rsq, mae),</span>
<span id="cb217-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> tune<span class="sc">::</span><span class="fu">control_grid</span>(<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb217-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb217-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>→ A | warning: A correlation computation is required, but `estimate` is constant and has 0 standard deviation, resulting in a divide by 0 error. `NA` will be returned.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>There were issues with some computations   A: x1
There were issues with some computations   A: x1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: More than one set of outcomes were used when tuning. This should never
happen. Review how the outcome is specified in your model.</code></pre>
</div>
</div>
<p>Show best values for hyperparameters. Sorted by minimum rmse, but the same for top two if use rsq and mae.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-37_8560ead1cfd8120ef71a0f2c94760629">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb222-1" aria-hidden="true" tabindex="-1"></a>xgboost_tuned <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb222-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"rmse"</span>) <span class="sc">|&gt;</span></span>
<span id="cb222-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb222-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">19</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.0055057</td>
<td style="text-align: right;">0.0000069</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.693983</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model40</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.0119502</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.697536</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model04</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0.0121593</td>
<td style="text-align: right;">2.3969037</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.703229</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model14</td>
</tr>
<tr class="even">
<td style="text-align: right;">26</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.0144181</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.707828</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model51</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.0110975</td>
<td style="text-align: right;">0.0000077</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.712866</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model53</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_best</span>(xgboost_tuned, <span class="at">metric =</span> <span class="st">"rsq"</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 10
  min_n tree_depth learn_rate loss_reduction .metric .estimator  mean     n
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
1    19         13    0.00551  0.00000685    rsq     standard   0.478     1
2    27          7    0.0120   0.00000000480 rsq     standard   0.477     1
# ℹ 2 more variables: std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_best</span>(xgboost_tuned, <span class="at">metric =</span> <span class="st">"mae"</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 10
  min_n tree_depth learn_rate loss_reduction .metric .estimator  mean     n
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
1    19         13    0.00551  0.00000685    mae     standard    1.28     1
2    27          7    0.0120   0.00000000480 mae     standard    1.29     1
# ℹ 2 more variables: std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
</div>
<p>For the final model we use the best values from the rmse criterion.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-38_58b19e74621b2e27cd1f25fec55d8293">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb227-1" aria-hidden="true" tabindex="-1"></a>xgboost_best_params <span class="ot">&lt;-</span> xgboost_tuned <span class="sc">%&gt;%</span></span>
<span id="cb227-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb227-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb227-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb227-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(xgboost_best_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">19</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.0055057</td>
<td style="text-align: right;">6.9e-06</td>
<td style="text-align: left;">Preprocessor1_Model40</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>min_n</strong> An integer for the minimum number of data points in a node that is required for the node to be split further.</p>
<p><strong>tree_depth</strong> An integer for the maximum depth of the tree (i.e.&nbsp;number of splits) (specific engines only).</p>
<p><strong>learn_rate</strong> A number for the rate at which the boosting algorithm adapts from iteration-to-iteration (specific engines only). This is sometimes referred to as the shrinkage parameter.</p>
<p><strong>loss_reduction</strong> A number for the reduction in the loss function required to split further (specific engines only).</p>
</section>
<section id="final-model" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="final-model"><span class="header-section-number">5.8</span> Final model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Final XGBoost model using the tuned hyperparameter values.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-39_1a771631efd408cac2688cc90a8b73f9">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb228-1" aria-hidden="true" tabindex="-1"></a>xgboost_model_final <span class="ot">&lt;-</span> xgboost_model <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_model</span>(xgboost_best_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Final workflow</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-40_7398c963009f9a7bf5b063e5e34150ba">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb229-1" aria-hidden="true" tabindex="-1"></a>xgboost_wf_final <span class="ot">&lt;-</span> xgboost_wf <span class="sc">|&gt;</span></span>
<span id="cb229-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb229-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">finalize_workflow</span>(xgboost_best_params)</span>
<span id="cb229-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb229-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb229-4" aria-hidden="true" tabindex="-1"></a>xgboost_wf_final</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: boost_tree()

── Preprocessor ────────────────────────────────────────────────────────────────
1 Recipe Step

• step_dummy()

── Model ───────────────────────────────────────────────────────────────────────
Boosted Tree Model Specification (regression)

Main Arguments:
  trees = 1000
  min_n = 19
  tree_depth = 13
  learn_rate = 0.00550566869602928
  loss_reduction = 6.85441389438756e-06

Engine-Specific Arguments:
  objective = reg:squarederror

Computational engine: xgboost </code></pre>
</div>
</div>
</section>
<section id="final-fit" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="final-fit"><span class="header-section-number">5.9</span> Final fit<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-fit" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Finally, let’s fit this final model to the training data and use our test data to estimate the model performance we expect to see with new data.</p>
<p>We can use the function last_fit() with our finalized model; this function fits the finalized model on the full training data set and evaluates the finalized model on the <strong>testing data</strong>.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-41_2a5374e146752dfc0db0dfc9fe1816ad">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-1" aria-hidden="true" tabindex="-1"></a>model.fit.all <span class="ot">&lt;-</span> xgboost_wf_final <span class="sc">|&gt;</span></span>
<span id="cb231-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> iso.training)</span>
<span id="cb231-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-4" aria-hidden="true" tabindex="-1"></a>final_fit_all <span class="ot">&lt;-</span> xgboost_wf_final <span class="sc">|&gt;</span></span>
<span id="cb231-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-5" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">last_fit</span>(iso.split)</span>
<span id="cb231-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb231-7" aria-hidden="true" tabindex="-1"></a>final_fit_all <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric .estimator .estimate .config             
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard       1.68  Preprocessor1_Model1
2 rsq     standard       0.591 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="r-squared-values" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="r-squared-values"><span class="header-section-number">5.10</span> R-squared values<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#r-squared-values" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>For training, test, and all data combined.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-42_501f080c8a553d91494b8ef49ab2595a">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-1" aria-hidden="true" tabindex="-1"></a>training_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit.all, <span class="at">new_data =</span> iso.training) <span class="sc">|&gt;</span></span>
<span id="cb233-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.training)</span>
<span id="cb233-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-4" aria-hidden="true" tabindex="-1"></a>test_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit.all, <span class="at">new_data =</span> iso.test) <span class="sc">|&gt;</span></span>
<span id="cb233-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.test)</span>
<span id="cb233-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-7" aria-hidden="true" tabindex="-1"></a>R2.training <span class="ot">&lt;-</span> <span class="fu">cor</span>(training_prediction<span class="sc">$</span>d18O, training_prediction<span class="sc">$</span>.pred, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb233-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-9" aria-hidden="true" tabindex="-1"></a>R2.test <span class="ot">&lt;-</span> <span class="fu">cor</span>(test_prediction<span class="sc">$</span>d18O, test_prediction<span class="sc">$</span>.pred, </span>
<span id="cb233-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"pearson"</span>)  </span>
<span id="cb233-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb233-12" aria-hidden="true" tabindex="-1"></a>R2.training</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9488551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb235-1" aria-hidden="true" tabindex="-1"></a>R2.test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7685424</code></pre>
</div>
</div>
</section>
<section id="explaining-model-predictions" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="explaining-model-predictions"><span class="header-section-number">5.11</span> Explaining model predictions<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#explaining-model-predictions" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="global-feature-importance" class="level3" data-number="5.11.1">
<h3 data-number="5.11.1" class="anchored" data-anchor-id="global-feature-importance"><span class="header-section-number">5.11.1</span> Global feature importance<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#global-feature-importance" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Global feature importance is evaluated by shuffling a columns values to see how much difference this makes to model performance. If it doesn’t make much difference then the variable is unimportant.</p>
<p>vip = variable importance plots</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-43_fe856a9e63563b049934d64cb7f2389e">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-1" aria-hidden="true" tabindex="-1"></a>explainer_xg <span class="ot">&lt;-</span> </span>
<span id="cb237-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-2" aria-hidden="true" tabindex="-1"></a>  DALEXtra<span class="sc">::</span><span class="fu">explain_tidymodels</span>(</span>
<span id="cb237-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> model.fit.all,</span>
<span id="cb237-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">data  =</span> iso.training, </span>
<span id="cb237-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y     =</span> iso.training<span class="sc">$</span>d18O, </span>
<span id="cb237-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Boosted regression tree"</span>, </span>
<span id="cb237-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb237-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb237-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Preparation of a new explainer is initiated
  -&gt; model label       :  Boosted regression tree 
  -&gt; data              :  2170  rows  18  cols 
  -&gt; data              :  tibble converted into a data.frame 
  -&gt; target variable   :  2170  values 
  -&gt; predict function  :  yhat.workflow  will be used (  default  )
  -&gt; predicted values  :  No value for predict function target column. (  default  )
  -&gt; model_info        :  package tidymodels , ver. 1.1.1 , task regression (  default  ) 
  -&gt; predicted values  :  numerical, min =  -13.51713 , mean =  -6.34107 , max =  -1.27115  
  -&gt; residual function :  difference between y and yhat (  default  )
  -&gt; residuals         :  numerical, min =  -4.518653 , mean =  -0.0322155 , max =  3.323095  
  A new explainer has been created!  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3861</span>)</span>
<span id="cb239-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb239-2" aria-hidden="true" tabindex="-1"></a>vip_xg <span class="ot">&lt;-</span> DALEX<span class="sc">::</span><span class="fu">model_parts</span>(explainer_xg, <span class="at">loss_function =</span> loss_root_mean_square)</span>
<span id="cb239-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(vip_xg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Comparing to plots of d18O versus each predictor variable, for data after the year 2000, shows consistency with the above, with d18O varying strongly with <em>ETmp</em> and <em>Tmin_N</em>.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-44_60e0992b24fef7b035b6f30d84574a93">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-1" aria-hidden="true" tabindex="-1"></a>d180.vs.climate.<span class="fl">2000.</span>onward <span class="ot">&lt;-</span> iso.data.<span class="fl">2000.</span>onward <span class="sc">|&gt;</span> </span>
<span id="cb240-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Month) <span class="sc">|&gt;</span></span>
<span id="cb240-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>d18O, <span class="at">names_to =</span> <span class="st">"Predictor"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb240-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-5" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(d180.vs.climate.<span class="fl">2000.</span>onward, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">y =</span> d18O)) <span class="sc">+</span></span>
<span id="cb240-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb240-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb240-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Predictor), <span class="at">scale =</span> <span class="st">"free_x"</span>)</span>
<span id="cb240-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb240-10" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="partial-dependence-profiles" class="level3" data-number="5.11.2">
<h3 data-number="5.11.2" class="anchored" data-anchor-id="partial-dependence-profiles"><span class="header-section-number">5.11.2</span> Partial dependence profiles<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#partial-dependence-profiles" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This shows how the predicted value of d18O changes with rainfall, minimum temperature, and latitude. The plots look similar to that back in the exploratory data analysis section.</p>
<p>All the data (i.e.&nbsp;training and test) are used for this (<em>N = NULL</em>).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-45_1b44f58afeb46f84682b7a7bf3c2847f">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">83983</span>)</span>
<span id="cb242-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-2" aria-hidden="true" tabindex="-1"></a>pdp_rain_Tmin_lat <span class="ot">&lt;-</span> DALEX<span class="sc">::</span><span class="fu">model_profile</span>(explainer_xg,</span>
<span id="cb242-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">N =</span> <span class="cn">NULL</span>,</span>
<span id="cb242-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb242-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tmin_N"</span>, </span>
<span id="cb242-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ETmp"</span>,</span>
<span id="cb242-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"lat"</span>,</span>
<span id="cb242-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"height"</span></span>
<span id="cb242-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb242-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb242-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb242-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pdp_rain_Tmin_lat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="all-data-predictions" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> All data predictions</h1>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-46_4977df43b5616eee5b7a96955e0daed5">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-1" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit.all, <span class="at">new_data =</span> iso.data.Site) <span class="sc">|&gt;</span></span>
<span id="cb243-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.data.Site <span class="sc">|&gt;</span></span>
<span id="cb243-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, Date, d18O)) <span class="sc">|&gt;</span></span>
<span id="cb243-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb243-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">residual =</span> d18O <span class="sc">-</span> .pred,</span>
<span id="cb243-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">residual_pct =</span> <span class="fu">abs</span>(residual <span class="sc">/</span> d18O <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb243-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb243-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-9" aria-hidden="true" tabindex="-1"></a>d18O_all_pred_long <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb243-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, Date, <span class="st">`</span><span class="at">Observed d18O</span><span class="st">`</span> <span class="ot">=</span> d18O, <span class="at">Predicted =</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb243-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-11" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb243-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Observed d18O"</span>, <span class="st">"Predicted"</span>),</span>
<span id="cb243-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Type"</span>,</span>
<span id="cb243-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"d18O"</span></span>
<span id="cb243-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb243-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plots-of-observed-and-predicted-at-all-sites" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="plots-of-observed-and-predicted-at-all-sites"><span class="header-section-number">6.1</span> Plots of observed and predicted at all sites<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plots-of-observed-and-predicted-at-all-sites" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>These are plotted in alphabetical order for the site name.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-47_7eaaaf8e4a9d3ed2dbf55e68498d4d76">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb244-1" aria-hidden="true" tabindex="-1"></a>sites.group1 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">1</span><span class="sc">:</span><span class="dv">21</span>]</span>
<span id="cb244-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb244-2" aria-hidden="true" tabindex="-1"></a>sites.group2 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">22</span><span class="sc">:</span><span class="dv">42</span>]</span>
<span id="cb244-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb244-3" aria-hidden="true" tabindex="-1"></a>sites.group3 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">43</span><span class="sc">:</span><span class="dv">63</span>]</span>
<span id="cb244-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb244-4" aria-hidden="true" tabindex="-1"></a>sites.group4 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">64</span><span class="sc">:</span><span class="dv">84</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-48_e3c7d5f670fee6b52be8a06ff85923ba">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-48-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-48-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-48-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="observed-and-predicted-over-all-sites" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="observed-and-predicted-over-all-sites"><span class="header-section-number">6.2</span> Observed and predicted over all sites<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#observed-and-predicted-over-all-sites" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-49_f2cbee4c9d6eb305f571bb8ffe95a538">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-1" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">&lt;-</span> <span class="fu">cor</span>(all_prediction<span class="sc">$</span>d18O, all_prediction<span class="sc">$</span>.pred, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb249-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_prediction, <span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> .pred)) <span class="sc">+</span></span>
<span id="cb249-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb249-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>,  <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb249-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb249-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted d18O"</span>) <span class="sc">+</span></span>
<span id="cb249-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb249-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Pearson correlation coefficient = "</span>, <span class="fu">round</span>(R2, <span class="dv">2</span>) ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For values of d18O less than -10 (i.e more negative) the model tends to predict a value higher than observed.</p>
<p>And for values greater than about -2.5 (i.e.&nbsp;closer to zero) the model tends to predict a value lower than observed.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-50_13d5fa07fcc9b608483242548b04b5b1">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_prediction, <span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> residual)) <span class="sc">+</span></span>
<span id="cb250-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb250-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>,  <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb250-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb250-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb250-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb250-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Residuals (observed - predicted)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Where and when is the model having trouble predicting (d18O values &lt; -10, greater &gt; -2.5)?</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-51_da7e8d3edef99873854cba17278d88db">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-1" aria-hidden="true" tabindex="-1"></a>predict.trouble <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb251-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(d18O <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span> <span class="sc">|</span> d18O <span class="sc">&gt;</span> <span class="sc">-</span><span class="fl">2.5</span>) <span class="sc">|&gt;</span></span>
<span id="cb251-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(Date, <span class="at">label =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb251-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-7" aria-hidden="true" tabindex="-1"></a>num.trouble.by.site <span class="ot">&lt;-</span> predict.trouble <span class="sc">|&gt;</span></span>
<span id="cb251-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Site,lat,lon) <span class="sc">|&gt;</span></span>
<span id="cb251-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb251-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb251-11" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(num.trouble.by.site, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   Site             lat   lon     n
   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 GNIP KAITAIA   -35.1  173.    30
 2 FREW 47        -45.5  169.    16
 3 FREW 35        -42.7  173.    13
 4 FREW 48        -45.0  169.    13
 5 Twizel         -44.3  170.    11
 6 Ahuriri Valley -44.5  170.     9
 7 FREW 25        -39.4  177.     8
 8 FREW 52        -43.7  170.     8
 9 FREW 3         -35.6  174.     7
10 FREW 41        -43.5  173.     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb253-1" aria-hidden="true" tabindex="-1"></a>num.trouble.by.month <span class="ot">&lt;-</span> predict.trouble <span class="sc">|&gt;</span></span>
<span id="cb253-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Month) <span class="sc">|&gt;</span></span>
<span id="cb253-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb253-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb253-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb253-5" aria-hidden="true" tabindex="-1"></a>num.trouble.by.month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   Month     n
   &lt;ord&gt; &lt;int&gt;
 1 Oct      45
 2 Jul      40
 3 Sep      34
 4 Jun      33
 5 Feb      32
 6 Dec      31
 7 Aug      27
 8 Apr      23
 9 May      22
10 Jan      17
11 Nov      17
12 Mar      11</code></pre>
</div>
</div>
<p>Spatial plot of number of observations at a site that are troublesome (also see up next the RSME and MAD by site).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-52_337a514c0905c2a4ea8b5754f013bca7">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(num.trouble.by.site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Remove those for which percent residual (of observed) is 100% or more.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-53_e9b81661ff646edc7129c7a01c35c84a">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-1" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="sc">|&gt;</span></span>
<span id="cb258-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(residual_pct <span class="sc">&lt;</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb258-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> residual_pct)) <span class="sc">+</span></span>
<span id="cb258-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb258-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb258-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb258-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Residual percent of observed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-54_d5a754478ea92c4b81190f4041a80e78">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-1" aria-hidden="true" tabindex="-1"></a>max_residual_pct <span class="ot">&lt;-</span> <span class="fu">max</span>(all_prediction<span class="sc">$</span>residual_pct)</span>
<span id="cb259-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-3" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="sc">|&gt;</span></span>
<span id="cb259-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(residual_pct <span class="sc">&lt;</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb259-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(residual_pct)) <span class="sc">+</span></span>
<span id="cb259-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb259-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb259-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Residual percent of observed"</span>) <span class="sc">+</span></span>
<span id="cb259-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb259-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Density"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="spatial-distribution-of-residuals" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="spatial-distribution-of-residuals"><span class="header-section-number">6.3</span> Spatial distribution of residuals<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-residuals" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Plot RMSE and MAD for each site.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-55_f76f5fccaf0248bf741a357b46cae2aa">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># no lat, lon in all_prediction</span></span>
<span id="cb260-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-2" aria-hidden="true" tabindex="-1"></a>all_prediction_spatial <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb260-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>lat, <span class="sc">-</span>lon) <span class="sc">|&gt;</span></span>
<span id="cb260-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(site.info, <span class="at">by =</span> <span class="fu">join_by</span>(Site))</span>
<span id="cb260-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-6" aria-hidden="true" tabindex="-1"></a>spatial_residual_by_site_all <span class="ot">&lt;-</span> all_prediction_spatial <span class="sc">|&gt;</span></span>
<span id="cb260-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site, lat, lon) <span class="sc">|&gt;</span></span>
<span id="cb260-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb260-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">rmse =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(residual<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">n</span>()),</span>
<span id="cb260-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">mad =</span> <span class="fu">median</span>(<span class="fu">abs</span>(residual))</span>
<span id="cb260-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb260-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Site', 'lat'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(spatial_residual_by_site_all, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.
ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(spatial_residual_by_site_all, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"mad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.
ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-55-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="xgboost-model-2000-onward" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> XGBoost model 2000 onward</h1>
<section id="initial-data-split-1" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="initial-data-split-1"><span class="header-section-number">7.1</span> Initial data split<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#initial-data-split-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The data are split up into training data (80%) and test data (20%).</p>
<p>This is done within d18O quartile strata, then pooled. The use of d18O strata ensures that the there are similar distributions for the training and test data sets.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-56_9590d4ba8b63f59b262c6d4049266073">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">386201</span>)</span>
<span id="cb266-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-2" aria-hidden="true" tabindex="-1"></a>iso.split <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(</span>
<span id="cb266-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> iso.data.Site.<span class="fl">2000.</span>onward,</span>
<span id="cb266-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop =</span> <span class="fl">0.80</span>,</span>
<span id="cb266-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb266-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-7" aria-hidden="true" tabindex="-1"></a>iso.training <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">training</span>(iso.split)</span>
<span id="cb266-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb266-8" aria-hidden="true" tabindex="-1"></a>iso.test     <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">testing</span>(iso.split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preprocessing-1" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="preprocessing-1"><span class="header-section-number">7.2</span> Preprocessing<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#preprocessing-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Make “Site” and “Date” identification variables to use in model fit checking.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-57_01a5bce22f151f6797120f9b2c8f261b">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb267-1" aria-hidden="true" tabindex="-1"></a>preprocessing_recipe <span class="ot">&lt;-</span> </span>
<span id="cb267-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb267-2" aria-hidden="true" tabindex="-1"></a>  recipes<span class="sc">::</span><span class="fu">recipe</span>(d18O <span class="sc">~</span> ., <span class="at">data =</span> iso.training) <span class="sc">|&gt;</span></span>
<span id="cb267-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb267-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(Site, Date, <span class="at">new_role =</span> <span class="st">"ID"</span>) <span class="sc">|&gt;</span></span>
<span id="cb267-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb267-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-xgboost-model-1" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="setup-xgboost-model-1"><span class="header-section-number">7.3</span> Setup XGBoost model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-xgboost-model-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-58_ecbd0e1a2cc312feece4a56aeee089f1">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-1" aria-hidden="true" tabindex="-1"></a>xgboost_model <span class="ot">&lt;-</span> </span>
<span id="cb268-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-2" aria-hidden="true" tabindex="-1"></a>  parsnip<span class="sc">::</span><span class="fu">boost_tree</span>(</span>
<span id="cb268-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">"regression"</span>,</span>
<span id="cb268-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="dv">1000</span>,</span>
<span id="cb268-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">tune</span>(),</span>
<span id="cb268-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb268-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">learn_rate =</span> <span class="fu">tune</span>(),</span>
<span id="cb268-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_reduction =</span> <span class="fu">tune</span>()</span>
<span id="cb268-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb268-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb268-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>, <span class="at">objective =</span> <span class="st">"reg:squarederror"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-workflow-1" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="setup-workflow-1"><span class="header-section-number">7.4</span> Setup workflow<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#setup-workflow-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Define the workflow</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-59_de0afc79e9099ef3f30da3939268dc6b">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb269-1" aria-hidden="true" tabindex="-1"></a> xgboost_wf <span class="ot">&lt;-</span> </span>
<span id="cb269-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb269-2" aria-hidden="true" tabindex="-1"></a>   workflows<span class="sc">::</span><span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb269-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb269-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">add_model</span>(xgboost_model) <span class="sc">|&gt;</span> </span>
<span id="cb269-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb269-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">add_recipe</span>(preprocessing_recipe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="grid-specification-1" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="grid-specification-1"><span class="header-section-number">7.5</span> Grid specification<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#grid-specification-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-60_ccbc492fef4678563d171363da8ed162">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-1" aria-hidden="true" tabindex="-1"></a>xgboost_params <span class="ot">&lt;-</span> </span>
<span id="cb270-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-2" aria-hidden="true" tabindex="-1"></a>  dials<span class="sc">::</span><span class="fu">parameters</span>(</span>
<span id="cb270-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">min_n</span>(),</span>
<span id="cb270-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tree_depth</span>(),</span>
<span id="cb270-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">learn_rate</span>(),</span>
<span id="cb270-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">loss_reduction</span>()</span>
<span id="cb270-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb270-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-61_bdf5dff24eaab93995af8a90e0e93040">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-1" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> </span>
<span id="cb271-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-2" aria-hidden="true" tabindex="-1"></a>  dials<span class="sc">::</span><span class="fu">grid_max_entropy</span>(</span>
<span id="cb271-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-3" aria-hidden="true" tabindex="-1"></a>    xgboost_params, </span>
<span id="cb271-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">60</span></span>
<span id="cb271-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb271-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb271-7" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(xgboost_grid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">21</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3e-07</td>
<td style="text-align: right;">0.0000207</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">5e-07</td>
<td style="text-align: right;">0.0222006</td>
</tr>
<tr class="even">
<td style="text-align: right;">32</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">0.9247570</td>
</tr>
<tr class="even">
<td style="text-align: right;">33</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">5e-06</td>
<td style="text-align: right;">0.0142910</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="cross-validation-split-1" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="cross-validation-split-1"><span class="header-section-number">7.6</span> Cross validation split<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cross-validation-split-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-62_0719544b62f26c7d5e907db630ccda74">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">8493</span>)</span>
<span id="cb272-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb272-2" aria-hidden="true" tabindex="-1"></a>iso.cv.folds <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">vfold_cv</span>(iso.training, <span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tune-the-model-1" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="tune-the-model-1"><span class="header-section-number">7.7</span> Tune the model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#tune-the-model-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-63_6207b4b1b25a4e9d90efa8d3edf6b8e4">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># hyperparameter tuning</span></span>
<span id="cb273-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-2" aria-hidden="true" tabindex="-1"></a>xgboost_tuned <span class="ot">&lt;-</span> tune<span class="sc">::</span><span class="fu">tune_grid</span>(</span>
<span id="cb273-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> xgboost_wf,</span>
<span id="cb273-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> iso.cv.folds,</span>
<span id="cb273-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> xgboost_grid,</span>
<span id="cb273-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> yardstick<span class="sc">::</span><span class="fu">metric_set</span>(rmse, rsq, mae),</span>
<span id="cb273-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> tune<span class="sc">::</span><span class="fu">control_grid</span>(<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb273-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb273-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>→ A | warning: A correlation computation is required, but `estimate` is constant and has 0 standard deviation, resulting in a divide by 0 error. `NA` will be returned.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>There were issues with some computations   A: x1
There were issues with some computations   A: x1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: More than one set of outcomes were used when tuning. This should never
happen. Review how the outcome is specified in your model.</code></pre>
</div>
</div>
<p>Show best values for hyperparameters. Sorted by minimum rmse, but the same for top two if use rsq and mae.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-64_874ebfea17c4ed82f796eb4e6013c505">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb278-1" aria-hidden="true" tabindex="-1"></a>xgboost_tuned <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"rmse"</span>) <span class="sc">|&gt;</span></span>
<span id="cb278-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb278-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.0160582</td>
<td style="text-align: right;">0.0000005</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.654025</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model35</td>
</tr>
<tr class="even">
<td style="text-align: right;">30</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">0.0780992</td>
<td style="text-align: right;">16.2195532</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.657261</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model26</td>
</tr>
<tr class="odd">
<td style="text-align: right;">30</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.0121632</td>
<td style="text-align: right;">0.0001029</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.659119</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model25</td>
</tr>
<tr class="even">
<td style="text-align: right;">23</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.0063014</td>
<td style="text-align: right;">0.0000015</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.673933</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model44</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0.0233329</td>
<td style="text-align: right;">0.0002170</td>
<td style="text-align: left;">rmse</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1.675577</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Preprocessor1_Model12</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_best</span>(xgboost_tuned, <span class="at">metric =</span> <span class="st">"rsq"</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 10
  min_n tree_depth learn_rate loss_reduction .metric .estimator  mean     n
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
1    15         10     0.0161    0.000000505 rsq     standard   0.531     1
2    30         12     0.0122    0.000103    rsq     standard   0.527     1
# ℹ 2 more variables: std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_best</span>(xgboost_tuned, <span class="at">metric =</span> <span class="st">"mae"</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 10
  min_n tree_depth learn_rate loss_reduction .metric .estimator  mean     n
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
1    15         10     0.0161    0.000000505 mae     standard    1.25     1
2    30         12     0.0122    0.000103    mae     standard    1.25     1
# ℹ 2 more variables: std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
</div>
<p>For the final model we use the best values from the rmse criterion.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-65_c8c883c64c5bcdcfb587e309de82b518">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb283-1" aria-hidden="true" tabindex="-1"></a>xgboost_best_params <span class="ot">&lt;-</span> xgboost_tuned <span class="sc">%&gt;%</span></span>
<span id="cb283-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb283-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb283-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb283-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb283-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(xgboost_best_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">min_n</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: right;">learn_rate</th>
<th style="text-align: right;">loss_reduction</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.0160582</td>
<td style="text-align: right;">5e-07</td>
<td style="text-align: left;">Preprocessor1_Model35</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>min_n</strong> An integer for the minimum number of data points in a node that is required for the node to be split further.</p>
<p><strong>tree_depth</strong> An integer for the maximum depth of the tree (i.e.&nbsp;number of splits) (specific engines only).</p>
<p><strong>learn_rate</strong> A number for the rate at which the boosting algorithm adapts from iteration-to-iteration (specific engines only). This is sometimes referred to as the shrinkage parameter.</p>
<p><strong>loss_reduction</strong> A number for the reduction in the loss function required to split further (specific engines only).</p>
</section>
<section id="final-model-1" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="final-model-1"><span class="header-section-number">7.8</span> Final model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-model-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Final XGBoost model using the tuned hyperparameter values.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-66_7649fb954335695e945728922b6f76b2">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb284-1" aria-hidden="true" tabindex="-1"></a>xgboost_model_final <span class="ot">&lt;-</span> xgboost_model <span class="sc">%&gt;%</span> </span>
<span id="cb284-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb284-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_model</span>(xgboost_best_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Final workflow</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-67_974cca44af353e9646509be9fe0a5155">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb285-1" aria-hidden="true" tabindex="-1"></a>xgboost_wf_final <span class="ot">&lt;-</span> xgboost_wf <span class="sc">|&gt;</span></span>
<span id="cb285-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb285-2" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">finalize_workflow</span>(xgboost_best_params)</span>
<span id="cb285-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb285-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb285-4" aria-hidden="true" tabindex="-1"></a>xgboost_wf_final</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: boost_tree()

── Preprocessor ────────────────────────────────────────────────────────────────
1 Recipe Step

• step_dummy()

── Model ───────────────────────────────────────────────────────────────────────
Boosted Tree Model Specification (regression)

Main Arguments:
  trees = 1000
  min_n = 15
  tree_depth = 10
  learn_rate = 0.0160581781517665
  loss_reduction = 5.05284913652649e-07

Engine-Specific Arguments:
  objective = reg:squarederror

Computational engine: xgboost </code></pre>
</div>
</div>
</section>
<section id="final-fit-1" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="final-fit-1"><span class="header-section-number">7.9</span> Final fit<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#final-fit-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Finally, let’s fit this final model to the training data and use our test data to estimate the model performance we expect to see with new data.</p>
<p>We can use the function last_fit() with our finalized model; this function fits the finalized model on the full training data set and evaluates the finalized model on the <strong>testing data</strong>.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-68_5eaa4e64b5c7d5eb4295697c958ec0a4">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-1" aria-hidden="true" tabindex="-1"></a>model.fit <span class="ot">&lt;-</span> xgboost_wf_final <span class="sc">|&gt;</span></span>
<span id="cb287-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> iso.training)</span>
<span id="cb287-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-4" aria-hidden="true" tabindex="-1"></a>final_fit <span class="ot">&lt;-</span> xgboost_wf_final <span class="sc">|&gt;</span></span>
<span id="cb287-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-5" aria-hidden="true" tabindex="-1"></a>  tune<span class="sc">::</span><span class="fu">last_fit</span>(iso.split)</span>
<span id="cb287-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb287-7" aria-hidden="true" tabindex="-1"></a>final_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric .estimator .estimate .config             
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard       1.66  Preprocessor1_Model1
2 rsq     standard       0.533 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="r-squared-values-1" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="r-squared-values-1"><span class="header-section-number">7.10</span> R-squared values<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#r-squared-values-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>For training, test, and all data combined.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-69_e6d215badf533c272383ccbc6684c93d">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-1" aria-hidden="true" tabindex="-1"></a>training_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit, <span class="at">new_data =</span> iso.training) <span class="sc">|&gt;</span></span>
<span id="cb289-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.training)</span>
<span id="cb289-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-4" aria-hidden="true" tabindex="-1"></a>test_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit, <span class="at">new_data =</span> iso.test) <span class="sc">|&gt;</span></span>
<span id="cb289-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.test)</span>
<span id="cb289-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-7" aria-hidden="true" tabindex="-1"></a>R2.training <span class="ot">&lt;-</span> <span class="fu">cor</span>(training_prediction<span class="sc">$</span>d18O, training_prediction<span class="sc">$</span>.pred, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb289-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-9" aria-hidden="true" tabindex="-1"></a>R2.test <span class="ot">&lt;-</span> <span class="fu">cor</span>(test_prediction<span class="sc">$</span>d18O, test_prediction<span class="sc">$</span>.pred, </span>
<span id="cb289-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"pearson"</span>)  </span>
<span id="cb289-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb289-12" aria-hidden="true" tabindex="-1"></a>R2.training</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9746578</code></pre>
</div>
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb291-1" aria-hidden="true" tabindex="-1"></a>R2.test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7302036</code></pre>
</div>
</div>
</section>
<section id="explaining-model-predictions-1" class="level2" data-number="7.11">
<h2 data-number="7.11" class="anchored" data-anchor-id="explaining-model-predictions-1"><span class="header-section-number">7.11</span> Explaining model predictions<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#explaining-model-predictions-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="global-feature-importance-1" class="level3" data-number="7.11.1">
<h3 data-number="7.11.1" class="anchored" data-anchor-id="global-feature-importance-1"><span class="header-section-number">7.11.1</span> Global feature importance<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#global-feature-importance-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Global feature importance is evaluated by shuffling a columns values to see how much difference this makes to model performance. If it doesn’t make much difference then the variable is unimportant.</p>
<p>vip = variable importance plots</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-70_c88d29bf603429ab6fbcabd0d8b42aec">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-1" aria-hidden="true" tabindex="-1"></a>explainer_xg <span class="ot">&lt;-</span> </span>
<span id="cb293-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-2" aria-hidden="true" tabindex="-1"></a>  DALEXtra<span class="sc">::</span><span class="fu">explain_tidymodels</span>(</span>
<span id="cb293-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> model.fit,</span>
<span id="cb293-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">data  =</span> iso.training, </span>
<span id="cb293-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y     =</span> iso.training<span class="sc">$</span>d18O, </span>
<span id="cb293-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Boosted regression tree"</span>, </span>
<span id="cb293-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb293-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb293-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Preparation of a new explainer is initiated
  -&gt; model label       :  Boosted regression tree 
  -&gt; data              :  1849  rows  18  cols 
  -&gt; data              :  tibble converted into a data.frame 
  -&gt; target variable   :  1849  values 
  -&gt; predict function  :  yhat.workflow  will be used (  default  )
  -&gt; predicted values  :  No value for predict function target column. (  default  )
  -&gt; model_info        :  package tidymodels , ver. 1.1.1 , task regression (  default  ) 
  -&gt; predicted values  :  numerical, min =  -16.94976 , mean =  -6.479278 , max =  -1.19171  
  -&gt; residual function :  difference between y and yhat (  default  )
  -&gt; residuals         :  numerical, min =  -7.190243 , mean =  -4.938692e-05 , max =  3.466931  
  A new explainer has been created!  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3861</span>)</span>
<span id="cb295-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb295-2" aria-hidden="true" tabindex="-1"></a>vip_xg <span class="ot">&lt;-</span> DALEX<span class="sc">::</span><span class="fu">model_parts</span>(explainer_xg, <span class="at">loss_function =</span> loss_root_mean_square)</span>
<span id="cb295-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb295-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(vip_xg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-70-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Comparing to plots of d18O versus each predictor variable, for data after the year 2000, shows consistency with the above, with d18O varying strongly with <em>ETmp</em> and <em>Tmin_N</em>.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-71_82addb7f12cf58a96acc97394a17a5d7">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-1" aria-hidden="true" tabindex="-1"></a>d180.vs.climate.<span class="fl">2000.</span>onward <span class="ot">&lt;-</span> iso.data.<span class="fl">2000.</span>onward <span class="sc">|&gt;</span> </span>
<span id="cb296-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Month) <span class="sc">|&gt;</span></span>
<span id="cb296-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>d18O, <span class="at">names_to =</span> <span class="st">"Predictor"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb296-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-5" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(d180.vs.climate.<span class="fl">2000.</span>onward, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">y =</span> d18O)) <span class="sc">+</span></span>
<span id="cb296-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb296-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb296-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Predictor), <span class="at">scale =</span> <span class="st">"free_x"</span>)</span>
<span id="cb296-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb296-10" aria-hidden="true" tabindex="-1"></a>plot.d180.vs.continuous</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-71-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="partial-dependence-profiles-1" class="level3" data-number="7.11.2">
<h3 data-number="7.11.2" class="anchored" data-anchor-id="partial-dependence-profiles-1"><span class="header-section-number">7.11.2</span> Partial dependence profiles<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#partial-dependence-profiles-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This shows how the predicted value of d18O changes with rainfall, minimum temperature, and latitude. The plots look similar to that back in the exploratory data analysis section.</p>
<p>All the data (i.e.&nbsp;training and test) are used for this (<em>N = NULL</em>).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-72_16693f6c9cbd46ecce4b11f6f7ecdcba">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">83983</span>)</span>
<span id="cb298-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-2" aria-hidden="true" tabindex="-1"></a>pdp_rain_Tmin_lat <span class="ot">&lt;-</span> DALEX<span class="sc">::</span><span class="fu">model_profile</span>(explainer_xg,</span>
<span id="cb298-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">N =</span> <span class="cn">NULL</span>,</span>
<span id="cb298-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb298-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tmin_N"</span>, </span>
<span id="cb298-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ETmp"</span>,</span>
<span id="cb298-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"lat"</span>,</span>
<span id="cb298-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"height"</span></span>
<span id="cb298-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb298-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb298-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb298-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pdp_rain_Tmin_lat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="all-data-predictions-1" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> All data predictions</h1>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-73_00f3f1d2b864d7707f97526ced11ad90">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-1" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit, <span class="at">new_data =</span> iso.data.Site.<span class="fl">2000.</span>onward) <span class="sc">|&gt;</span></span>
<span id="cb299-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(iso.data.Site.<span class="fl">2000.</span>onward <span class="sc">|&gt;</span></span>
<span id="cb299-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, Date, d18O)) <span class="sc">|&gt;</span></span>
<span id="cb299-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb299-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">residual =</span> d18O <span class="sc">-</span> .pred,</span>
<span id="cb299-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">residual_pct =</span> <span class="fu">abs</span>(residual <span class="sc">/</span> d18O <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb299-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb299-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-9" aria-hidden="true" tabindex="-1"></a>d18O_all_pred_long <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb299-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, Date, <span class="st">`</span><span class="at">Observed d18O</span><span class="st">`</span> <span class="ot">=</span> d18O, <span class="at">Predicted =</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb299-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-11" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb299-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Observed d18O"</span>, <span class="st">"Predicted"</span>),</span>
<span id="cb299-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Type"</span>,</span>
<span id="cb299-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"d18O"</span></span>
<span id="cb299-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb299-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plots-of-observed-and-predicted-at-all-sites-1" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="plots-of-observed-and-predicted-at-all-sites-1"><span class="header-section-number">8.1</span> Plots of observed and predicted at all sites<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#plots-of-observed-and-predicted-at-all-sites-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>These are plotted in alphabetical order for the site name.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-74_954b9f31c15ba847a870357f181d94a0">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb300-1" aria-hidden="true" tabindex="-1"></a>sites.group1 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">1</span><span class="sc">:</span><span class="dv">21</span>]</span>
<span id="cb300-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb300-2" aria-hidden="true" tabindex="-1"></a>sites.group2 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">22</span><span class="sc">:</span><span class="dv">42</span>]</span>
<span id="cb300-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb300-3" aria-hidden="true" tabindex="-1"></a>sites.group3 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">43</span><span class="sc">:</span><span class="dv">63</span>]</span>
<span id="cb300-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb300-4" aria-hidden="true" tabindex="-1"></a>sites.group4 <span class="ot">&lt;-</span> the.sites<span class="sc">$</span>Site[<span class="dv">64</span><span class="sc">:</span><span class="dv">84</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-75_5ae899fe75ac2e72382076300cd7a875">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-75-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-75-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_obs_fitted</span>(d18O_all_pred_long, sites.group4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-75-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="observed-and-predicted-over-all-sites-1" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="observed-and-predicted-over-all-sites-1"><span class="header-section-number">8.2</span> Observed and predicted over all sites<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#observed-and-predicted-over-all-sites-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-76_688eac143443fee388c2caa862e09350">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-1" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">&lt;-</span> <span class="fu">cor</span>(all_prediction<span class="sc">$</span>d18O, all_prediction<span class="sc">$</span>.pred, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb305-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_prediction, <span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> .pred)) <span class="sc">+</span></span>
<span id="cb305-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb305-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>,  <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb305-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb305-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted d18O"</span>) <span class="sc">+</span></span>
<span id="cb305-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb305-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Pearson correlation coefficient = "</span>, <span class="fu">round</span>(R2, <span class="dv">2</span>) ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-76-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For values of d18O less than -10 (i.e more negative) the model tends to predict a value higher than observed.</p>
<p>And for values greater than about -2.5 (i.e.&nbsp;closer to zero) the model tends to predict a value lower than observed.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-77_c788b42b5c037779d4a92c8045973f2b">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_prediction, <span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> residual)) <span class="sc">+</span></span>
<span id="cb306-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb306-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb306-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb306-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>,  <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb306-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb306-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb306-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb306-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Residuals (observed - predicted)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-77-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Where and when is the model having trouble predicting (d18O values &lt; -10, greater &gt; -2.5)?</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-78_6569da44e3fd7931616018af8b2ece44">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-1" aria-hidden="true" tabindex="-1"></a>predict.trouble <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb307-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(d18O <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span> <span class="sc">|</span> d18O <span class="sc">&gt;</span> <span class="sc">-</span><span class="fl">2.5</span>) <span class="sc">|&gt;</span></span>
<span id="cb307-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(Date, <span class="at">label =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb307-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-7" aria-hidden="true" tabindex="-1"></a>num.trouble.by.site <span class="ot">&lt;-</span> predict.trouble <span class="sc">|&gt;</span></span>
<span id="cb307-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Site,lat,lon) <span class="sc">|&gt;</span></span>
<span id="cb307-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb307-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb307-11" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(num.trouble.by.site, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   Site             lat   lon     n
   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 FREW 47        -45.5  169.    16
 2 FREW 35        -42.7  173.    13
 3 FREW 48        -45.0  169.    13
 4 Twizel         -44.3  170.    11
 5 Ahuriri Valley -44.5  170.     9
 6 FREW 25        -39.4  177.     8
 7 FREW 52        -43.7  170.     8
 8 FREW 3         -35.6  174.     7
 9 FREW 41        -43.5  173.     7
10 FREW 43        -43.9  171.     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb309-1" aria-hidden="true" tabindex="-1"></a>num.trouble.by.month <span class="ot">&lt;-</span> predict.trouble <span class="sc">|&gt;</span></span>
<span id="cb309-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb309-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Month) <span class="sc">|&gt;</span></span>
<span id="cb309-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb309-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb309-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb309-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb309-5" aria-hidden="true" tabindex="-1"></a>num.trouble.by.month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   Month     n
   &lt;ord&gt; &lt;int&gt;
 1 Oct      42
 2 Jul      39
 3 Sep      33
 4 Jun      30
 5 Dec      28
 6 Feb      27
 7 Aug      27
 8 May      21
 9 Apr      20
10 Jan      12
11 Nov      11
12 Mar       6</code></pre>
</div>
</div>
<p>Spatial plot of number of observations at a site that are troublesome (also see up next the RSME and MAD by site).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-79_da4b677e4dcc5d3996bdb26bddb0b08a">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(num.trouble.by.site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-79-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Remove those for which percent residual (of observed) is 100% or more.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-80_e2a90dad96f087da3093e0853971980e">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-1" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="sc">|&gt;</span></span>
<span id="cb314-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(residual_pct <span class="sc">&lt;</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb314-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> d18O, <span class="at">y =</span> residual_pct)) <span class="sc">+</span></span>
<span id="cb314-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb314-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Observed d18O"</span>) <span class="sc">+</span> </span>
<span id="cb314-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb314-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Residual percent of observed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-80-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-81_343e86d9535cabf8ff11da37c1fd62ca">
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-1" aria-hidden="true" tabindex="-1"></a>max_residual_pct <span class="ot">&lt;-</span> <span class="fu">max</span>(all_prediction<span class="sc">$</span>residual_pct)</span>
<span id="cb315-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-3" aria-hidden="true" tabindex="-1"></a>all_prediction <span class="sc">|&gt;</span></span>
<span id="cb315-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(residual_pct <span class="sc">&lt;</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb315-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(residual_pct)) <span class="sc">+</span></span>
<span id="cb315-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb315-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb315-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Residual percent of observed"</span>) <span class="sc">+</span></span>
<span id="cb315-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb315-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Density"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-81-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="spatial-distribution-of-residuals-1" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="spatial-distribution-of-residuals-1"><span class="header-section-number">8.3</span> Spatial distribution of residuals<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#spatial-distribution-of-residuals-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Plot RMSE and MAD for each site.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-82_c57355be5f977f8d9b182938b94c2e20">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># no lat, lon in all_prediction</span></span>
<span id="cb316-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-2" aria-hidden="true" tabindex="-1"></a>all_prediction_spatial <span class="ot">&lt;-</span> all_prediction <span class="sc">|&gt;</span></span>
<span id="cb316-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>lat, <span class="sc">-</span>lon) <span class="sc">|&gt;</span></span>
<span id="cb316-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(site.info, <span class="at">by =</span> <span class="fu">join_by</span>(Site))</span>
<span id="cb316-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb316-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-6" aria-hidden="true" tabindex="-1"></a>spatial_residual_by_site <span class="ot">&lt;-</span> all_prediction_spatial <span class="sc">|&gt;</span></span>
<span id="cb316-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site, lat, lon) <span class="sc">|&gt;</span></span>
<span id="cb316-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb316-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">rmse =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(residual<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">n</span>()),</span>
<span id="cb316-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">mad =</span> <span class="fu">median</span>(<span class="fu">abs</span>(residual))</span>
<span id="cb316-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb316-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Site', 'lat'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(spatial_residual_by_site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.
ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-82-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iso_plot_spatial_static</span>(spatial_residual_by_site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"mad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.
ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-82-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="compare-two-models" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Compare two models</h1>
<section id="rmse-by-site" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="rmse-by-site"><span class="header-section-number">9.1</span> RMSE by site<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#rmse-by-site" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The GNIP Kaitia site has no data after 2000 and is dropped from the table (it has an NA for rmse).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-83_d88a3e63690352c31369637451dd1a20">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-1" aria-hidden="true" tabindex="-1"></a>spatial_residual_by_site_table <span class="ot">&lt;-</span> spatial_residual_by_site <span class="sc">|&gt;</span></span>
<span id="cb322-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb322-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb322-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">rmse =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>), </span>
<span id="cb322-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mad  =</span> <span class="fu">round</span>(mad, <span class="dv">2</span>)</span>
<span id="cb322-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span>  </span>
<span id="cb322-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, rmse, mad)</span>
<span id="cb322-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-9" aria-hidden="true" tabindex="-1"></a>both.models.rmse.by.site <span class="ot">&lt;-</span> spatial_residual_by_site_all <span class="sc">|&gt;</span></span>
<span id="cb322-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb322-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb322-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">rmse_all_data =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>), </span>
<span id="cb322-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mad_all_data =</span> <span class="fu">round</span>(mad, <span class="dv">2</span>)</span>
<span id="cb322-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb322-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Site, lat, lon, rmse_all_data, mad_all_data) <span class="sc">|&gt;</span></span>
<span id="cb322-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(spatial_residual_by_site_table, <span class="at">by =</span> <span class="fu">join_by</span>(Site)) <span class="sc">|&gt;</span></span>
<span id="cb322-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb322-18"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">rmse_diff =</span> rmse <span class="sc">-</span> rmse_all_data,</span>
<span id="cb322-19"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">mad_diff =</span> mad <span class="sc">-</span> mad_all_data</span>
<span id="cb322-20"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb322-21"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb322-22"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-22" aria-hidden="true" tabindex="-1"></a>    Site, lat, lon,</span>
<span id="cb322-23"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-23" aria-hidden="true" tabindex="-1"></a>    rmse_all_data, rmse, rmse_diff,</span>
<span id="cb322-24"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-24" aria-hidden="true" tabindex="-1"></a>    mad_all_data, mad, mad_diff</span>
<span id="cb322-25"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb322-26"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rmse_diff_neg =</span> <span class="sc">-</span>rmse_diff) <span class="sc">|&gt;</span></span>
<span id="cb322-27"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(rmse)</span>
<span id="cb322-28"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-29"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-29" aria-hidden="true" tabindex="-1"></a>both.models.rmse.by.site <span class="sc">|&gt;</span></span>
<span id="cb322-30"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rmse_diff) <span class="sc">|&gt;</span></span>
<span id="cb322-31"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb322-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>lat, <span class="sc">-</span>lon, <span class="sc">-</span>rmse_diff_neg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 × 7
   Site                rmse_all_data  rmse rmse_diff mad_all_data   mad mad_diff
   &lt;chr&gt;                       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 Ohau top weather p…          4.82  3.08     -1.74         0.89  0.99   0.1   
 2 Cardrona Base area           2.23  0.61     -1.62         1.1   0.46  -0.64  
 3 FREW 35                      1.96  0.86     -1.1          0.81  0.36  -0.45  
 4 NZWaM 1                      1.56  0.95     -0.61         0.94  0.55  -0.39  
 5 FREW 50                      1.2   0.63     -0.57         0.55  0.2   -0.35  
 6 FREW 54                      1.44  0.93     -0.51         0.76  0.23  -0.53  
 7 FREW 6                       1.32  0.87     -0.45         0.5   0.23  -0.27  
 8 FREW 52                      1.3   0.89     -0.41         0.55  0.51  -0.0400
 9 FREW 47                      1.62  1.22     -0.4          0.8   0.5   -0.3   
10 NZWaM 3                      1.02  0.63     -0.39         0.88  0.48  -0.4   
# ℹ 86 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb324-1" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(both.models.rmse.by.site, <span class="at">path =</span> <span class="st">"output/both.models.rmse.by.site.xlsx"</span>)</span>
<span id="cb324-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb324-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb324-3" aria-hidden="true" tabindex="-1"></a>mean_rmse_diff <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(both.models.rmse.by.site<span class="sc">$</span>rmse_diff, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The mean rmse_diff value is -0.15, where a negative value indicates a better fit when the early GNIP data is dropped.</p>
<p>Density plot for the distribution of rmse_diff.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-84_c0b84cb325dffb0a48e16213f06d8e22">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> both.models.rmse.by.site, <span class="fu">aes</span>(<span class="at">x =</span> rmse_diff)) <span class="sc">+</span></span>
<span id="cb325-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">adjust =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb325-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>, <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb325-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, </span>
<span id="cb325-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="dv">2</span>, </span>
<span id="cb325-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">linewidth =</span> <span class="fl">1.1</span>, </span>
<span id="cb325-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="st">"brown"</span>) <span class="sc">+</span></span>
<span id="cb325-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>, <span class="fl">1.0</span>) <span class="sc">+</span></span>
<span id="cb325-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb325-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Probability distribution for change in RMSE with dropping early GNIP data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for x is already present.
Adding another scale for x, which will replace the existing scale.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-84-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The negative rmse_diff is ploted here, so the bigger the circle, the better the fit.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-85_859f2c317ded644ca7d4b11e04e3e2ed">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb328-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">iso_plot_spatial_static</span>(both.models.rmse.by.site, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>,                          <span class="st">"rmse_diff_neg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-85-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="sites-with-worse-fit" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="sites-with-worse-fit"><span class="header-section-number">9.2</span> Sites with worse fit<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#sites-with-worse-fit" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>All sites with a worse fit by rmse, ordered from worst to least worst.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-86_2b151ac6c889771d978b7cbc71e3ebcb">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-1" aria-hidden="true" tabindex="-1"></a>sites.worse.fit.all <span class="ot">&lt;-</span> both.models.rmse.by.site <span class="sc">|&gt;</span></span>
<span id="cb331-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rmse_diff <span class="sc">&gt;</span> <span class="fl">0.00</span>) <span class="sc">|&gt;</span></span>
<span id="cb331-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>lat, <span class="sc">-</span>lon, <span class="sc">-</span>rmse, <span class="sc">-</span>rmse_diff_neg, <span class="sc">-</span>rmse_all_data, <span class="sc">-</span>mad_all_data, <span class="sc">-</span>mad) <span class="sc">|&gt;</span></span>
<span id="cb331-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rmse_diff)) </span>
<span id="cb331-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-6" aria-hidden="true" tabindex="-1"></a>sites.worse.fit.all <span class="sc">|&gt;</span></span>
<span id="cb331-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb331-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="fu">nrow</span>(sites.worse.fit.all))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   Site                              rmse_diff mad_diff
   &lt;chr&gt;                                 &lt;dbl&gt;    &lt;dbl&gt;
 1 Waiau River at Clifden               0.4     -0.05  
 2 Makarewa Aquifer at Mckinnon Road    0.32    -0.0600
 3 FREW 16                              0.22    -0.0400
 4 Makarora                             0.22    -0.33  
 5 NZWaM 5                              0.21    -0.22  
 6 Greymouth                            0.16     0.0100
 7 Ashley Forest                        0.16    -0.86  
 8 Christchurch                         0.15     0     
 9 Arthurs Pass                         0.150   -0.34  
10 Waimate                              0.130   -0.57  
11 FREW 40                              0.12    -0.0100
12 McKellars Flat at Gorge Burn         0.120   -0.0400
13 Inchbonnie                           0.11    -0.18  
14 Mawhera Forest                       0.11    -0.1   
15 FREW 43                              0.1     -0.4   
16 Waitaki Dam                          0.100   -0.37  
17 FREW 34                              0.0800   0.0600
18 FREW 27                              0.0800  -0.18  
19 FREW 24                              0.0600  -0.07  
20 Lake Moeraki                         0.0600  -0.09  
21 FREW 26                              0.0400  -0.12  
22 Lower Aparima Aquifer at Riverton    0.0200   0.0200
23 FREW 17                              0.0100  -0.1   
24 FREW 9                               0.0100  -0.05  </code></pre>
</div>
</div>
<p>There are 24 sites with a worse fit, out of a total of 96 sites.</p>
<p>Plot of sites with a worse fit. The larger the circle, the worse the fit.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-87_f47c0140473ae6d0eb6101adf8c8253a">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb333-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">iso_plot_spatial_static</span>(sites.worse.fit.all, <span class="st">"Site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>,                          <span class="st">"rmse_diff"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ 48 tiles needed, this may take a while (try a smaller zoom?)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb336-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Sites with a worse fit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-87-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="predicting-over-nz" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Predicting over NZ</h1>
<section id="base-nz-map" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="base-nz-map"><span class="header-section-number">10.1</span> Base NZ map<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#base-nz-map" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-88_4a36ded372a366a02658c37153972a7b">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb337-1" aria-hidden="true" tabindex="-1"></a>nzmap <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">'large'</span>, </span>
<span id="cb337-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb337-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">country =</span> <span class="st">"New Zealand"</span>,</span>
<span id="cb337-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb337-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">returnclass =</span> <span class="st">'sf'</span>)</span>
<span id="cb337-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb337-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb337-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_is_longlat</span>(nzmap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude Chatham Islands</span></span>
<span id="cb339-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb339-2" aria-hidden="true" tabindex="-1"></a>nzmap.proj <span class="ot">&lt;-</span> nzmap <span class="sc">%&gt;%</span> </span>
<span id="cb339-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb339-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crop</span>(<span class="at">xmin =</span> <span class="fl">164.8</span>, <span class="at">xmax =</span> <span class="fl">179.4</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="fl">47.7</span>, <span class="at">ymax =</span> <span class="sc">-</span><span class="fl">33.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: attribute variables are assumed to be spatially constant throughout
all geometries</code></pre>
</div>
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb341-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> nzmap.proj, <span class="at">fill =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span> </span>
<span id="cb341-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">164.8</span>, <span class="fl">179.4</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">47.7</span>, <span class="sc">-</span><span class="fl">33.8</span>)) <span class="sc">+</span></span>
<span id="cb341-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Longitude"</span>) <span class="sc">+</span></span>
<span id="cb341-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb341-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb341-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"NZ map"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-88-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="elevation-data-at-vcsn-points" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="elevation-data-at-vcsn-points"><span class="header-section-number">10.2</span> Elevation data at VCSN points<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#elevation-data-at-vcsn-points" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>These can be obtained using the R package <em>elevatr.</em></p>
<p><a href="https://cran.r-project.org/web/packages/elevatr/vignettes/introduction_to_elevatr.html#Key_information_about_version_0990_and_upcoming_versions_of_elevatr" class="uri">https://cran.r-project.org/web/packages/elevatr/vignettes/introduction_to_elevatr.html#Key_information_about_version_0990_and_upcoming_versions_of_elevatr</a></p>
<p>Elevations are obtained from Amazon Web Services (AWS) with a zoom of z = 11. The accuracy is unknown, and this requires further exploration. These take a while to download and process (5-10 minutes), so is done once and saved, then loaded subsequently.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-89_84bcbb56fe3d48189a3328a0584d1b76">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sf object</span></span>
<span id="cb342-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-2" aria-hidden="true" tabindex="-1"></a><span class="co"># vcsn.agent.locations &lt;- vcsn_agent_locations("Q:/CLIMATE/vcsn_data/")</span></span>
<span id="cb342-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-4" aria-hidden="true" tabindex="-1"></a><span class="co"># vcsn.agent.elevations &lt;- vcsn.agent.locations |&gt;</span></span>
<span id="cb342-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   elevatr::get_elev_point(src = "aws", z = 11)</span></span>
<span id="cb342-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-7" aria-hidden="true" tabindex="-1"></a><span class="co"># save(vcsn.agent.elevations, file = "data/vcsn.agent.elevations.RData")</span></span>
<span id="cb342-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb342-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"data/vcsn.agent.elevations.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Plot the elevation map.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-90_140eec3194fdeda98c404073c9f9a8e4">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-1" aria-hidden="true" tabindex="-1"></a>elevation.stars <span class="ot">&lt;-</span> vcsn.agent.elevations <span class="sc">|&gt;</span></span>
<span id="cb343-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">|&gt;</span></span>
<span id="cb343-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="at">lon =</span> vcsn.lon, <span class="at">lat =</span> vcsn.lat, elevation) <span class="sc">|&gt;</span></span>
<span id="cb343-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-4" aria-hidden="true" tabindex="-1"></a>  stars<span class="sc">::</span><span class="fu">st_as_stars</span>(<span class="at">dims =</span> <span class="fu">c</span>(<span class="st">"lon"</span>, <span class="st">"lat"</span>))   </span>
<span id="cb343-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb343-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stars</span>(<span class="at">data =</span> elevation.stars) <span class="sc">+</span></span>
<span id="cb343-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb343-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">type =</span> <span class="st">"viridis"</span>) <span class="sc">+</span> </span>
<span id="cb343-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Elevation (m)"</span>) <span class="sc">+</span>  </span>
<span id="cb343-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Longitude"</span>) <span class="sc">+</span></span>
<span id="cb343-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb343-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Latitude"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-90-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="vcsn-climate-data-for-2023" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="vcsn-climate-data-for-2023"><span class="header-section-number">10.3</span> VCSN climate data for 2023<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#vcsn-climate-data-for-2023" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Daily VCSN climate data is downloaded for 2023.</p>
<p>Climate variables are selected that are used in the trained model, and mean values of these found by month for each VCSN station. The estimated elevation at each VCSN station is joined to the data.</p>
<p>Site and Date columns with NA values are added, as these were in the model as identification variables (not predictors).</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-91_af63d2508783f394eade3dd1c1b256d2">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vcsn.2023.orig &lt;- vcsn_combine_daily_data(VCSN.directory = "Q:/CLIMATE/vcsn_data/", </span></span>
<span id="cb344-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-2" aria-hidden="true" tabindex="-1"></a> <span class="co">#                         years = 2023)</span></span>
<span id="cb344-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-3" aria-hidden="true" tabindex="-1"></a><span class="co"># save(vcsn.2023.orig, file = "data/vcsn.2023.orig.RData")</span></span>
<span id="cb344-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb344-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"data/vcsn.2023.orig.RData"</span>)</span>
<span id="cb344-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb344-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-7" aria-hidden="true" tabindex="-1"></a>vcsn<span class="fl">.2023</span> <span class="ot">&lt;-</span> vcsn.<span class="fl">2023.</span>orig <span class="sc">|&gt;</span> </span>
<span id="cb344-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">lat =</span> Lat, <span class="at">lon =</span> Longt) <span class="sc">|&gt;</span></span>
<span id="cb344-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(Date, <span class="at">label =</span> <span class="cn">TRUE</span>), <span class="at">.after =</span> Date)</span>
<span id="cb344-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb344-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb344-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iso.data.Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "d18O"    "Site"    "Date"    "height"  "Month"   "lat"     "lon"    
 [8] "MSLP"    "PET"     "RH"      "SoilM"   "ETmp"    "Rad"     "VP"     
[15] "Wind"    "Rain_bc" "Tmax_N"  "Tmin_N" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] "d18O"    "Site"    "Date"    "height"  "Month"   "lat"     "lon"     "MSLP"    "PET"     "RH"      "SoilM"  </span></span>
<span id="cb346-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] "ETmp"    "Rad"     "VP"      "Wind"    "Rain_bc" "Tmax_N"  "Tmin_N"</span></span>
<span id="cb346-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-4" aria-hidden="true" tabindex="-1"></a>table.Agent.elevation <span class="ot">&lt;-</span> vcsn.agent.elevations <span class="sc">|&gt;</span></span>
<span id="cb346-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">|&gt;</span></span>
<span id="cb346-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Agent, <span class="at">height =</span> elevation)</span>
<span id="cb346-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-8" aria-hidden="true" tabindex="-1"></a>vcsn.<span class="fl">2023.</span>month <span class="ot">&lt;-</span> vcsn<span class="fl">.2023</span> <span class="sc">|&gt;</span></span>
<span id="cb346-9"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Agent, Month, lat, lon, </span>
<span id="cb346-10"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-10" aria-hidden="true" tabindex="-1"></a>    MSLP, PET, RH, SoilM, ETmp, Rad, VP, Wind,</span>
<span id="cb346-11"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-11" aria-hidden="true" tabindex="-1"></a>    Rain_bc, Tmax_N, Tmin_N</span>
<span id="cb346-12"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb346-13"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(MSLP<span class="sc">:</span>Tmin_N, <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb346-14"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(Agent, Month, lat, lon)</span>
<span id="cb346-15"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb346-16"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(table.Agent.elevation, <span class="at">by =</span> <span class="fu">join_by</span>(Agent)) <span class="sc">|&gt;</span></span>
<span id="cb346-17"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(height, <span class="at">.before =</span> Month) <span class="sc">|&gt;</span></span>
<span id="cb346-18"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="cn">NA</span>) <span class="sc">|&gt;</span></span>
<span id="cb346-19"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Date) <span class="sc">|&gt;</span></span>
<span id="cb346-20"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Site =</span> <span class="cn">NA</span>) <span class="sc">|&gt;</span></span>
<span id="cb346-21"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Site) </span>
<span id="cb346-22"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-23"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb346-23" aria-hidden="true" tabindex="-1"></a>num.VCSN.Agent <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(vcsn.<span class="fl">2023.</span>month<span class="sc">$</span>Agent))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number of row of data is equal to the number of VCSN stations (11491) * 12 months = 137892.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-92_3828e91a2c3ae15fdee89ae61583b860">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(vcsn.<span class="fl">2023.</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 137,892
Columns: 18
$ Site    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ Date    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ Agent   &lt;dbl&gt; 3027, 3106, 3380, 4782, 5878, 7317, 7318, 7319, 7320, 7344, 73…
$ height  &lt;dbl&gt; 730, 604, 829, 635, 866, 606, 717, 669, 376, 1121, 650, 623, 3…
$ Month   &lt;ord&gt; Jan, Jan, Jan, Jan, Jan, Jan, Jan, Jan, Jan, Jan, Jan, Jan, Ja…
$ lat     &lt;dbl&gt; -45.325, -45.375, -45.425, -45.475, -45.525, -45.575, -45.625,…
$ lon     &lt;dbl&gt; 166.825, 166.825, 166.825, 166.825, 166.825, 166.825, 166.825,…
$ MSLP    &lt;dbl&gt; 1015.703, 1015.781, 1015.865, 1015.958, 1016.039, 1016.129, 10…
$ PET     &lt;dbl&gt; 4.064516, 4.135484, 4.129032, 4.190323, 3.825806, 4.732258, 4.…
$ RH      &lt;dbl&gt; 80.44194, 80.40968, 80.37097, 80.50968, 80.97097, 80.77419, 80…
$ SoilM   &lt;dbl&gt; -56.770968, -57.183871, -57.683871, -55.161290, -49.283871, -5…
$ ETmp    &lt;dbl&gt; 17.70323, 17.78065, 17.72581, 17.81935, 16.88710, 18.92581, 17…
$ Rad     &lt;dbl&gt; 17.00323, 16.90645, 16.90645, 16.80645, 16.71935, 16.65806, 16…
$ VP      &lt;dbl&gt; 15.02581, 14.97097, 14.90645, 14.60000, 14.13548, 14.23548, 14…
$ Wind    &lt;dbl&gt; 4.341935, 4.800000, 5.164516, 4.674194, 5.048387, 5.070968, 4.…
$ Rain_bc &lt;dbl&gt; 2.929032, 2.867742, 2.825806, 2.667742, 2.606452, 2.558065, 2.…
$ Tmax_N  &lt;dbl&gt; 19.83226, 20.15161, 20.27097, 20.68065, 19.86452, 22.24194, 20…
$ Tmin_N  &lt;dbl&gt; 12.283871, 12.270968, 12.167742, 12.264516, 11.558065, 12.9612…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove large objects to clear the memory</span></span>
<span id="cb349-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb349-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vcsn.<span class="fl">2023.</span>orig)</span>
<span id="cb349-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb349-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vcsn<span class="fl">.2023</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="prediction-and-plotting" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="prediction-and-plotting"><span class="header-section-number">10.4</span> Prediction and plotting<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#prediction-and-plotting" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="only-january" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="only-january"><span class="header-section-number">10.4.1</span> Only January<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#only-january" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An example of prediction and plotting for the January month.</p>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-93_3b5d5b3805cdc3909c0013e3c13920a8">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-1" aria-hidden="true" tabindex="-1"></a>vcsn.<span class="fl">2023.</span>month.Jan <span class="ot">&lt;-</span> vcsn.<span class="fl">2023.</span>month <span class="sc">|&gt;</span></span>
<span id="cb350-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Month <span class="sc">==</span> <span class="st">"Jan"</span>)</span>
<span id="cb350-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-4" aria-hidden="true" tabindex="-1"></a>nz_prediction_Jan <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit, <span class="at">new_data =</span> vcsn.<span class="fl">2023.</span>month.Jan) <span class="sc">|&gt;</span></span>
<span id="cb350-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_cols</span>(vcsn.<span class="fl">2023.</span>month.Jan) <span class="sc">|&gt;</span></span>
<span id="cb350-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(lat, lon, <span class="at">d18O.pred =</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb350-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb350-7" aria-hidden="true" tabindex="-1"></a>    stars<span class="sc">::</span><span class="fu">st_as_stars</span>(<span class="at">dims =</span> <span class="fu">c</span>(<span class="st">"lon"</span>, <span class="st">"lat"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-94_291ed998dd973af268e7914354f2c62a">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb351-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stars</span>(<span class="at">data =</span> nz_prediction_Jan) <span class="sc">+</span></span>
<span id="cb351-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb351-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">type =</span> <span class="st">"viridis"</span>) <span class="sc">+</span> </span>
<span id="cb351-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Predicted d18O"</span>) <span class="sc">+</span>  </span>
<span id="cb351-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Longitude"</span>) <span class="sc">+</span></span>
<span id="cb351-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb351-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Latitude"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-94-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="all-months" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="all-months"><span class="header-section-number">10.4.2</span> All Months<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#all-months" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-95_4666e4ab15978960d8854826db6dd4ec">
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb352-1" aria-hidden="true" tabindex="-1"></a>nz_prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(model.fit, <span class="at">new_data =</span> vcsn.<span class="fl">2023.</span>month) <span class="sc">|&gt;</span></span>
<span id="cb352-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb352-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_cols</span>(vcsn.<span class="fl">2023.</span>month) <span class="sc">|&gt;</span></span>
<span id="cb352-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb352-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(lat, lon, Month, <span class="at">d18O.pred =</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb352-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb352-4" aria-hidden="true" tabindex="-1"></a>    stars<span class="sc">::</span><span class="fu">st_as_stars</span>(<span class="at">dims =</span> <span class="fu">c</span>(<span class="st">"lon"</span>, <span class="st">"lat"</span>, <span class="st">"Month"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="XGBoost-and-VCSN-data-for-isoscape-current-version_cache/html/unnamed-chunk-96_e8bad551299be3a1b0982f857a1f798f">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb353-2"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stars</span>(<span class="at">data =</span> nz_prediction) <span class="sc">+</span></span>
<span id="cb353-3"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb353-4"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">type =</span> <span class="st">"viridis"</span>) <span class="sc">+</span> </span>
<span id="cb353-5"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Predicted d18O"</span>) <span class="sc">+</span>  </span>
<span id="cb353-6"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Longitude"</span>) <span class="sc">+</span></span>
<span id="cb353-7"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb353-8"><a href="file:///C:/Users/mckenziea/OneDrive%20-%20NIWA/Year%202024/Water%20age/analysis/XGBoost%20and%20VCSN%20data/CurrentVersion/XGBoost-and-VCSN-data-for-isoscape-current-version.html#cb353-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Month), <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">4</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./XGBoost_files/unnamed-chunk-96-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>